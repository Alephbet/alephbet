{"version":3,"sources":["webpack://AlephBet/webpack/universalModuleDefinition","webpack://AlephBet/./src/options.js","webpack://AlephBet/./node_modules/uuid/dist/esm-browser/rng.js","webpack://AlephBet/./node_modules/uuid/dist/esm-browser/regex.js","webpack://AlephBet/./node_modules/uuid/dist/esm-browser/validate.js","webpack://AlephBet/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://AlephBet/./src/utils.js","webpack://AlephBet/./node_modules/uuid/dist/esm-browser/v4.js","webpack://AlephBet/./src/goal.js","webpack://AlephBet/./src/storage.js","webpack://AlephBet/./src/adapters/local_storage_adapter.js","webpack://AlephBet/./src/adapters/google_universal_analytics_adapter.js","webpack://AlephBet/./src/experiment.js","webpack://AlephBet/./src/adapters/alephbet_adapter.js","webpack://AlephBet/./src/adapters/gimel_adapter.js","webpack://AlephBet/./src/adapters/lamed_adapter.js","webpack://AlephBet/./src/adapters/persistent_queue_google_analytics_adapter.js","webpack://AlephBet/./src/alephbet.js","webpack://AlephBet/./node_modules/charenc/charenc.js","webpack://AlephBet/./node_modules/crypt/crypt.js","webpack://AlephBet/./node_modules/sha1/sha1.js","webpack://AlephBet/webpack/bootstrap","webpack://AlephBet/webpack/startup","webpack://AlephBet/webpack/runtime/define property getters","webpack://AlephBet/webpack/runtime/global","webpack://AlephBet/webpack/runtime/hasOwnProperty shorthand","webpack://AlephBet/webpack/runtime/make namespace object"],"names":["root","factory","exports","module","define","amd","self","debug","getRandomValues","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","uuid","byteToHex","i","push","toString","substr","sha1","require","keys","Object","options","buf","offset","rnds","random","arr","arguments","length","undefined","toLowerCase","TypeError","defaults","obj","key","value","remove","list","callback","deletions","iterable","index","el","splice","indexOf","omit","results","Array","from","concat","apply","log","message","console","text","seed","parseInt","this","Math","check_weights","variants","contains_weight","weight","every","has_weight","sum_weights","sum","validate_weights","values","name","props","utils","unique","experiments","experiment","add_experiment","goal_complete","namespace","check","localStorage","setItem","removeItem","storage","JSON","parse","getItem","stringify","set","Storage","get","GoogleUniversalAnalyticsAdapter","category","action","label","global","ga","nonInteraction","variant","_track","goal_name","_props","Experiment","_options","validate","user_id","variant_names","run","get_stored_variant","activate_variant","conditionally_activate_variant","activate","trigger","in_sample","pick_variant","tracking","experiment_start","all_variants_have_weights","pick_weighted_variant","pick_unweighted_variant","weights_sum","weighted_index","ceil","_random","entries","partitions","chosen_partition","floor","active","sample","salt","goal","goals","add_goal","storage_adapter","tracking_adapter","LocalStorageAdapter","url","_storage","_queue","queue_name","_flush","quuid","err","_res","properties","_quuid","data","window","jQuery","ajax","method","success","xhr","XMLHttpRequest","params","encodeURIComponent","join","replace","open","onload","status","send","_jquery_get","_plain_js_get","item","_remove_quuid","_ajax_get","shift","_user_uuid","event","AlephbetAdapter","_remove_uuid","hitCallback","Goal","charenc","utf8","stringToBytes","str","bin","unescape","bytesToString","bytes","decodeURIComponent","escape","charCodeAt","String","fromCharCode","base64map","crypt","rotl","n","b","rotr","endian","constructor","Number","randomBytes","bytesToWords","words","wordsToBytes","bytesToHex","hex","hexToBytes","c","bytesToBase64","base64","triplet","j","charAt","base64ToBytes","imod4","pow","api","digestbytes","Buffer","isBuffer","prototype","slice","call","isArray","m","l","w","H0","H1","H2","H3","H4","a","d","e","t","asBytes","asString","_blocksize","_digestsize","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","definition","o","defineProperty","enumerable","g","globalThis","Function","prop","hasOwnProperty","r","Symbol","toStringTag"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAAkB,SAAID,IAEtBD,EAAe,SAAIC,IARrB,CASGK,MAAM,WACT,M,uSCVA,SACEC,OAAO,GCET,IAAIC,EACAC,EAAQ,IAAIC,WAAW,IACZ,SAASC,IAEtB,IAAKH,KAGHA,EAAoC,oBAAXI,QAA0BA,OAAOJ,iBAAmBI,OAAOJ,gBAAgBK,KAAKD,SAA+B,oBAAbE,UAAgE,mBAA7BA,SAASN,iBAAkCM,SAASN,gBAAgBK,KAAKC,WAGrO,MAAM,IAAIC,MAAM,4GAIpB,OAAOP,EAAgBC,GCjBzB,8HCMA,EAJA,SAAkBO,GAChB,MAAuB,iBAATA,GAAqB,OAAWA,ICKhD,IAFA,IAAIC,EAAY,GAEPC,EAAI,EAAGA,EAAI,MAAOA,EACzBD,EAAUE,MAAMD,EAAI,KAAOE,SAAS,IAAIC,OAAO,I,iyBCNjD,IAAMC,EAAOC,EAAQ,KAgFrB,QA9Ec,CACZC,KAAMC,OAAOD,KACbR,KCJF,SAAYU,EAASC,EAAKC,GAExB,IAAIC,GADJH,EAAUA,GAAW,IACFI,SAAWJ,EAAQf,KAAOA,KAK7C,GAHAkB,EAAK,GAAe,GAAVA,EAAK,GAAY,GAC3BA,EAAK,GAAe,GAAVA,EAAK,GAAY,IAEvBF,EAAK,CACPC,EAASA,GAAU,EAEnB,IAAK,IAAIV,EAAI,EAAGA,EAAI,KAAMA,EACxBS,EAAIC,EAASV,GAAKW,EAAKX,GAGzB,OAAOS,EAGT,OFRF,SAAmBI,GACjB,IAAIH,EAASI,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,EAG7EhB,GAAQC,EAAUc,EAAIH,EAAS,IAAMX,EAAUc,EAAIH,EAAS,IAAMX,EAAUc,EAAIH,EAAS,IAAMX,EAAUc,EAAIH,EAAS,IAAM,IAAMX,EAAUc,EAAIH,EAAS,IAAMX,EAAUc,EAAIH,EAAS,IAAM,IAAMX,EAAUc,EAAIH,EAAS,IAAMX,EAAUc,EAAIH,EAAS,IAAM,IAAMX,EAAUc,EAAIH,EAAS,IAAMX,EAAUc,EAAIH,EAAS,IAAM,IAAMX,EAAUc,EAAIH,EAAS,KAAOX,EAAUc,EAAIH,EAAS,KAAOX,EAAUc,EAAIH,EAAS,KAAOX,EAAUc,EAAIH,EAAS,KAAOX,EAAUc,EAAIH,EAAS,KAAOX,EAAUc,EAAIH,EAAS,MAAMO,cAMzf,IAAK,EAASnB,GACZ,MAAMoB,UAAU,+BAGlB,OAAOpB,EENA,CAAUa,IDXjBQ,SAAU,SAACC,EAAKD,GACd,IAAK,IAAME,KAAOF,EAAU,CAC1B,IAAMG,EAAQH,EAASE,QACNL,IAAbI,EAAIC,KACND,EAAIC,GAAOC,GAGf,OAAOF,GAGTG,OAAQ,SAACC,EAAMC,GAGb,IAFA,IAAMC,EAAY,GACZC,E,+CAAeH,I,6iBACZI,EAAQ,EAAGA,EAAQD,EAASZ,OAAQa,IAAS,CACpD,IAAMC,EAAKF,EAASC,GAChBH,EAASI,EAAID,KACfJ,EAAKM,OAAON,EAAKO,QAAQF,GAAK,GAC9BH,EAAUzB,KAAK4B,I,MAGnB,OAAOH,GAGTM,KAAM,SAACZ,GAAiB,IACtB,IAAMa,EAAU,EAAH,GAAOb,GADE,mBAATd,EAAS,iCAATA,EAAS,kBAEtB,cAAkB4B,MAAMC,KAAK,GAAGC,OAAOC,MAAM,GAAI/B,IAAjD,eAAyD,CAApD,IAAMe,EAAG,YACLY,EAAQZ,GAEjB,OAAOY,GAGTK,IAAK,SAACC,GACA/B,EAAQnB,OAEVmD,QAAQF,IAAIC,IAIhBnC,KAAM,SAACqC,GAAD,OAAUrC,EAAKqC,GAAMvC,YAE3BU,OA5CY,SA4CL8B,GACL,OAAKA,EAEEC,SAASC,KAAKxC,KAAKsC,GAAMvC,OAAO,EAAG,IAAK,IAAM,gBAFnC0C,KAAKjC,UAKzBkC,cAAe,SAACC,GACd,IAAMC,EAAkB,GACxB,IAAK,IAAM3B,KAAO0B,EAAU,CAC1B,IAAMzB,EAAQyB,EAAS1B,GAAM2B,EAAgB/C,KAAqB,MAAhBqB,EAAM2B,QAE1D,OAAOD,EAAgBE,OAAM,SAAAC,GAAU,OAAIA,MAG7CC,YAAa,SAACL,GACZ,IAAIM,EAAM,EACV,IAAK,IAAMhC,KAAO0B,EAEhBM,GADcN,EAAS1B,GACV4B,QAAU,EAEzB,OAAOI,GAGTC,iBAAkB,SAACP,GAEjB,IADA,IAAMC,EAAkB,GACxB,MAAoBzC,OAAOgD,OAAOR,GAAlC,eAA6C,CAAxC,IAAMzB,EAAK,KACd0B,EAAgB/C,KAAqB,MAAhBqB,EAAM2B,QAE7B,OAAOD,EAAgBE,OAAM,SAAAC,GAAU,OACrCA,GAAcH,EAAgBE,OAAM,SAAAC,GAAU,OAAKA,U,wwCErDzD,Q,WAtBE,WAAYK,GAAkB,IAAZC,EAAY,uDAAJ,GAAI,UAC5Bb,KAAKY,KAAOA,EACZZ,KAAKa,MAAQA,EACbC,WAAed,KAAKa,MAAO,CAACE,QAAQ,IACpCf,KAAKgB,YAAc,G,4DAGNC,GACbjB,KAAKgB,YAAY3D,KAAK4D,K,sCAGRD,GAAa,UACFA,GADE,IAC3B,gCAAWC,EAAX,QAAsCjB,KAAKkB,eAAeD,IAD/B,iC,iCAIlB,UACgBjB,KAAKgB,aADrB,IACT,2BAA2C,QAC9BG,cAAcnB,KAAKY,KAAMZ,KAAKa,OAFlC,oC,0RCOb,Q,WAvBE,aAAoC,IAAxBO,EAAwB,uDAAZ,WAAY,UAClCpB,KAAKoB,UAAYA,EACjB,IACE,IAAMC,EAAQ,qBACdC,aAAaC,QAAQF,EAAOA,GAC5BC,aAAaE,WAAWH,GACxB,SACA,MAAM,IAAIpE,MAAM,kC,iDAIhBwB,EAAKC,GACP,IAAI+C,EAAUC,KAAKC,MAAML,aAAaM,QAAQ5B,KAAKoB,YAAc,MAGjE,OAFAK,EAAQhD,GAAOC,EACf4C,aAAaC,QAAQvB,KAAKoB,UAAWM,KAAKG,UAAUJ,IAC7C/C,I,0BAGLD,GACF,OAAOiD,KAAKC,MAAML,aAAaM,QAAQ5B,KAAKoB,YAAc,MAAM3C,Q,sBCRpE,EAX4B,CAC1B2C,UAAW,WAEXU,IAH0B,SAGtBrD,EAAKC,GACP,OAAO,IAAIqD,EAAQ/B,KAAKoB,WAAWU,IAAIrD,EAAKC,IAG9CsD,IAP0B,SAOtBvD,GACF,OAAO,IAAIsD,EAAQ/B,KAAKoB,WAAWY,IAAIvD,K,gLCRrCwD,E,iLAGUC,EAAUC,EAAQC,GAI9B,GAHAtB,MAAA,4CACuCoB,EADvC,aACoDC,EADpD,aAC+DC,IAEtC,mBAAdC,IAAOC,GAChB,MAAM,IAAIrF,MACR,iFAIJoF,IAAOC,GAAG,OAAQ,QAASJ,EAAUC,EAAQC,EAAO,CAACG,eAAgB,M,uCAG/CtB,EAAYuB,GAClCxC,KAAKyC,OAAOzC,KAAKoB,UAAjB,UAA+BH,EAAWL,KAA1C,cAAoD4B,GAAW,c,oCAG5CvB,EAAYuB,EAASE,EAAWC,GACnD3C,KAAKyC,OAAOzC,KAAKoB,UAAjB,UAA+BH,EAAWL,KAA1C,cAAoD4B,GAAWE,M,2CApB9C,Y,mBADfT,G,sFAyBN,U,6rCCtBMW,E,WAaJ,aAA0B,IAAdhF,EAAc,uDAAJ,GAAI,UACxBoC,KAAKpC,QAAUA,EACfkD,WAAed,KAAKpC,QAASgF,EAAWC,UACxCC,EAAS9C,KAAKpC,SACdoC,KAAKY,KAAOZ,KAAKpC,QAAQgD,KACzBZ,KAAKG,SAAWH,KAAKpC,QAAQuC,SAC7BH,KAAK+C,QAAU/C,KAAKpC,QAAQmF,QAC5B/C,KAAKgD,cAAgBlC,EAAMpD,KAAKsC,KAAKG,UACrCH,KAAKiD,M,mDAILnC,MAAA,gCAAmCY,KAAKG,UAAU7B,KAAKpC,WACvD,IAAM4E,EAAUxC,KAAKkD,qBACjBV,GAEF1B,MAAA,UAAa0B,EAAb,YACAxC,KAAKmD,iBAAiBX,IAEtBxC,KAAKoD,mC,uCAIQZ,GAAS,MACxB,UAAAxC,KAAKG,SAASqC,UAAd,SAAwBa,SAASrD,MACjCA,KAAKyB,UAAUK,IAAf,UAAsB9B,KAAKpC,QAAQgD,KAAnC,YAAmD4B,K,uDAKnD,GAAKxC,KAAKpC,QAAQ0F,YAClBxC,MAAU,eACLd,KAAKuD,aAAV,CACAzC,MAAU,aACV,IAAM0B,EAAUxC,KAAKwD,eACrBxD,KAAKyD,WAAWC,iBAAiB1D,KAAMwC,GACvCxC,KAAKmD,iBAAiBX,M,oCAGVE,GAAuB,IAAZ7B,EAAY,uDAAJ,GAE/B,GADAC,WAAeD,EAAO,CAACE,QAAQ,KAE7BF,EAAME,SACNf,KAAKyB,UAAUO,IAAf,UAAsBhC,KAAKpC,QAAQgD,KAAnC,YAA2C8B,IAF7C,CAIA,IAAMF,EAAUxC,KAAKkD,qBAChBV,IACD3B,EAAME,QACRf,KAAKyB,UAAUK,IAAf,UAAsB9B,KAAKpC,QAAQgD,KAAnC,YAA2C8B,IAAa,GAE1D5B,MACE,yBACGd,KAAKpC,QAAQgD,KADhB,oBACgC4B,EADhC,iBACgDE,EADhD,cAGF1C,KAAKyD,WAAWtC,cAAcnB,KAAMwC,EAASE,EAAW7B,O,2CAIxD,OAAOb,KAAKyB,UAAUO,IAAf,UAAsBhC,KAAKpC,QAAQgD,KAAnC,e,qCAIP,IAAM+C,EAA4B7C,EAAMZ,cAAcF,KAAKG,UAE3D,OADAW,MAAA,qCAAwC6C,IACpCA,EACK3D,KAAK4D,wBAEP5D,KAAK6D,4B,8CAeZ,IAFA,IAAMC,EAAchD,EAAMN,YAAYR,KAAKG,UACvC4D,EAAiB9D,KAAK+D,KAAMhE,KAAKiE,QAAQ,WAAaH,GAC1D,MAA2BnG,OAAOuG,QAAQlE,KAAKG,UAA/C,eAA0D,iBAA9C1B,EAA8C,KAIxD,IADAsF,GAHwD,KAGhC1D,SACF,EAAG,OAAO5B,K,gDAKlC,IAAM0F,EAAa,EAAMnE,KAAKgD,cAAc7E,OACtCiG,EAAmBnE,KAAKoE,MAAMrE,KAAKiE,QAAQ,WAAaE,GACxD3B,EAAUxC,KAAKgD,cAAcoB,GAEnC,OADAtD,MAAA,UAAa0B,EAAb,YACOA,I,kCAIP,IAAI8B,EAAStE,KAAKyB,UAAUO,IAAf,UAAsBhC,KAAKpC,QAAQgD,KAAnC,eACb,YAAsB,IAAX0D,IACXA,EAAStE,KAAKiE,QAAQ,WAAajE,KAAKpC,QAAQ2G,OAChDvE,KAAKyB,UAAUK,IAAf,UAAsB9B,KAAKpC,QAAQgD,KAAnC,cAAqD0D,IAFXA,I,8BAMpCE,GACN,IAAKxE,KAAK+C,QAAS,OAAOjC,EAAM9C,SAChC,IAAM8B,EAAO,GAAH,OAAME,KAAKY,KAAX,YAAmB4D,EAAnB,YAA2BxE,KAAK+C,SAC1C,OAAOjC,EAAM9C,OAAO8B,K,+BAGb2E,GACPA,EAAKvD,eAAelB,Q,gCAGZ0E,GAAO,Q,4lBAAA,CACIA,GADJ,IACf,gCAAWD,EAAX,QAA0BzE,KAAK2E,SAASF,IADzB,iC,gCAKf,OAAOzE,KAAKpC,QAAQgH,kB,iCAIpB,OAAO5E,KAAKpC,QAAQiH,sB,qIA1IlBjC,E,WACc,CAChBhC,KAAM,KACNT,SAAU,KACV4C,QAAS,KACTwB,OAAQ,EACRjB,QALgB,WAMd,OAAO,GAETuB,iBAAkB5C,EAClB2C,gBAAiBE,IAoIrB,IAAMhC,EAAW,SAAClF,GAChB,GAAqB,OAAjBA,EAAQgD,KACV,MAAM,IAAI3D,MAAM,wCAElB,GAAyB,OAArBW,EAAQuC,SACV,MAAM,IAAIlD,MAAM,6BAElB,GAA+B,mBAApBW,EAAQ0F,QACjB,MAAM,IAAIrG,MAAM,8BAGlB,IADkC6D,EAAMJ,iBAAiB9C,EAAQuC,UAE/D,MAAM,IAAIlD,MAAM,kCAIpB,U,seCxDA,Q,WA/FE,WAAY8H,GAA4D,IAAvD3D,EAAuD,uDAA3C,WAAYK,EAA+B,uDAArBqD,EAAqB,8BAF3D,mBAGX9E,KAAKgF,SAAWvD,EAChBzB,KAAK+E,IAAMA,EACX/E,KAAKoB,UAAYA,EACjBpB,KAAKiF,OAASvD,KAAKC,MAAM3B,KAAKgF,SAAShD,IAAIhC,KAAKkF,aAAe,MAC/DlF,KAAKmF,S,2DAGOC,GAAO,WACnB,OAAO,SAACC,EAAKC,GACPD,IACJvE,SAAa,EAAKmE,QAAQ,SAAAhG,GAAE,OAAIA,EAAGsG,WAAWC,SAAWJ,KACzD,EAAKJ,SAASlD,IAAI,EAAKoD,WAAYxD,KAAKG,UAAU,EAAKoD,a,kCAI/CF,EAAKU,EAAM5G,GAErB,OADAiC,MAAU,6BACH4E,OAAOC,OAAOC,KAAK,CACxBC,OAAQ,MACRd,MACAU,OACAK,QAASjH,M,oCAICkG,EAAKU,EAAM5G,GACvBiC,MAAU,4BAGV,IAFA,IAAMiF,EAAM,IAAIC,eACZC,EAAS,GACb,MAAkBtI,OAAOD,KAAK+H,GAA9B,eAAqC,CAAhC,IAAMhH,EAAG,KACZwH,EAAO5I,KAAP,UAAe6I,mBAAmBzH,GAAlC,YAA0CyH,mBAAmBT,EAAKhH,MAOpE,OALAwH,EAASA,EAAOE,KAAK,KAAKC,QAAQ,OAAQ,KAC1CL,EAAIM,KAAK,MAAT,UAAmBtB,EAAnB,YAA0BkB,IAC1BF,EAAIO,OAAS,WACQ,MAAfP,EAAIQ,QAAgB1H,KAEnBkH,EAAIS,S,gCAGHzB,EAAKU,EAAM5G,GAAU,MAC7B,iBAAI6G,OAAOC,cAAX,OAAI,EAAeC,KACV5F,KAAKyG,YAAY1B,EAAKU,EAAM5G,GAE9BmB,KAAK0G,cAAc3B,EAAKU,EAAM5G,K,+BAG9B,Q,w5BAAA,CACYmB,KAAKiF,QADjB,IACP,2BAAgC,KAArB0B,EAAqB,QACxB9H,EAAWmB,KAAK4G,cAAcD,EAAKpB,WAAWC,QACpDxF,KAAK6G,UAAU7G,KAAK+E,IAAKjE,EAAM1B,KAAKuH,EAAKpB,WAAY,UAAW1G,IAH3D,iC,iCAOEoC,EAAYwD,GACrB,OAAKxD,EAAW8B,SAEX0B,EAAK1D,OAGHD,EAAMtD,KAAN,UACFwC,KAAKoB,UADH,YACgBH,EAAWL,KAD3B,YACmC6D,EAAK7D,KADxC,YACgDK,EAAW8B,UANlCjC,EAAM5D,S,6BAUjC+D,EAAYuB,EAASiC,GAC1B3D,MACE,qCACGd,KAAKoB,UADR,aACsBH,EAAWL,KADjC,aAC0C4B,EAD1C,aACsDiC,EAAK7D,OAEzDZ,KAAKiF,OAAO9G,OAAS,KAAK6B,KAAKiF,OAAO6B,QAC1C9G,KAAKiF,OAAO5H,KAAK,CACfkI,WAAY,CACVtE,WAAYA,EAAWL,KACvB4E,OAAQ1E,EAAM5D,OACdA,KAAM8C,KAAK+G,WAAW9F,EAAYwD,GAClCjC,UACAwE,MAAOvC,EAAK7D,KACZQ,UAAWpB,KAAKoB,aAGpBpB,KAAKgF,SAASlD,IAAI9B,KAAKkF,WAAYxD,KAAKG,UAAU7B,KAAKiF,SACvDjF,KAAKmF,W,uCAGUlE,EAAYuB,GAC3BxC,KAAKyC,OAAOxB,EAAYuB,EAAS,CAAC5B,KAAM,cAAeG,QAAQ,M,oCAGnDE,EAAYuB,EAASE,EAAW7B,GAC5Cb,KAAKyC,OAAOxB,EAAYuB,EAAS1B,EAAMvC,SAAS,CAACqC,KAAM8B,GAAY7B,S,shCC/EvE,Q,mzBAde,gB,kDAEFI,EAAYwD,GACrB,OAAKxD,EAAW8B,SAEX0B,EAAK1D,OAGHD,EAAMtD,KAAN,UACFwC,KAAKoB,UADH,YACgBH,EAAWL,KAD3B,YACmCK,EAAW8B,UANrBjC,EAAM5D,Y,oBAJf+J,G,s2BCD3B,S,szBAHe,gB,YADYA,G,0eCoD3B,S,WAjDE,aAA2C,IAA/BxF,EAA+B,uDAArBqD,EAAqB,+BAH/B,YAG+B,qBAF9B,aAGX9E,KAAKgF,SAAWvD,EAChBzB,KAAKiF,OAASvD,KAAKC,MAAM3B,KAAKgF,SAAShD,IAAIhC,KAAKkF,aAAe,MAC/DlF,KAAKmF,S,0DAGMjI,GAAM,WACjB,OAAO,WACL4D,SAAa,EAAKmE,QAAQ,SAAAhG,GAAE,OAAIA,EAAG/B,OAASA,KAC5C,EAAK8H,SAASlD,IAAI,EAAKoD,WAAYxD,KAAKG,UAAU,EAAKoD,Y,+BAKzD,GAAyB,mBAAd5C,IAAOC,GAChB,MAAM,IAAIrF,MACR,iFAHG,Q,05BAAA,CAOY+C,KAAKiF,QAPjB,IAOP,2BAAgC,KAArB0B,EAAqB,QACxB9H,EAAWmB,KAAKkH,aAAaP,EAAKzJ,MACxCmF,IAAOC,GAAG,OAAQ,QAASqE,EAAKzE,SAAUyE,EAAKxE,OAAQwE,EAAKvE,MAAO,CACjE+E,YAAatI,EACb0D,eAAgB,KAXb,iC,6BAgBFL,EAAUC,EAAQC,GACvBtB,MACE,gEACGoB,EADH,aACgBC,EADhB,aAC2BC,IAEzBpC,KAAKiF,OAAO9G,OAAS,KAAK6B,KAAKiF,OAAO6B,QAC1C9G,KAAKiF,OAAO5H,KAAK,CAACH,KAAM4D,EAAM5D,OAAQgF,WAAUC,SAAQC,UACxDpC,KAAKgF,SAASlD,IAAI9B,KAAKkF,WAAYxD,KAAKG,UAAU7B,KAAKiF,SACvDjF,KAAKmF,W,uCAGUlE,EAAYuB,GAC3BxC,KAAKyC,OAAOzC,KAAKoB,UAAjB,UAA+BH,EAAWL,KAA1C,cAAoD4B,GAAW,c,oCAGnDvB,EAAYuB,EAASE,EAAWC,GAC5C3C,KAAKyC,OAAOzC,KAAKoB,UAAjB,UAA+BH,EAAWL,KAA1C,cAAoD4B,GAAWE,Q,uBClCnE,IACE9E,UACAwJ,OACAxE,e,QCrBF,IAAIyE,EAAU,CAEZC,KAAM,CAEJC,cAAe,SAASC,GACtB,OAAOH,EAAQI,IAAIF,cAAcG,SAASxB,mBAAmBsB,MAI/DG,cAAe,SAASC,GACtB,OAAOC,mBAAmBC,OAAOT,EAAQI,IAAIE,cAAcC,OAK/DH,IAAK,CAEHF,cAAe,SAASC,GACtB,IAAK,IAAII,EAAQ,GAAIxK,EAAI,EAAGA,EAAIoK,EAAIrJ,OAAQf,IAC1CwK,EAAMvK,KAAyB,IAApBmK,EAAIO,WAAW3K,IAC5B,OAAOwK,GAITD,cAAe,SAASC,GACtB,IAAK,IAAIJ,EAAM,GAAIpK,EAAI,EAAGA,EAAIwK,EAAMzJ,OAAQf,IAC1CoK,EAAInK,KAAK2K,OAAOC,aAAaL,EAAMxK,KACrC,OAAOoK,EAAIrB,KAAK,OAKtB9J,EAAOD,QAAUiL,G,OChCjB,IACMa,EAGJC,EAHID,EACE,mEAENC,EAAQ,CAENC,KAAM,SAASC,EAAGC,GAChB,OAAQD,GAAKC,EAAMD,IAAO,GAAKC,GAIjCC,KAAM,SAASF,EAAGC,GAChB,OAAQD,GAAM,GAAKC,EAAOD,IAAMC,GAIlCE,OAAQ,SAASH,GAEf,GAAIA,EAAEI,aAAeC,OACnB,OAA0B,SAAnBP,EAAMC,KAAKC,EAAG,GAAsC,WAApBF,EAAMC,KAAKC,EAAG,IAIvD,IAAK,IAAIjL,EAAI,EAAGA,EAAIiL,EAAElK,OAAQf,IAC5BiL,EAAEjL,GAAK+K,EAAMK,OAAOH,EAAEjL,IACxB,OAAOiL,GAITM,YAAa,SAASN,GACpB,IAAK,IAAIT,EAAQ,GAAIS,EAAI,EAAGA,IAC1BT,EAAMvK,KAAK4C,KAAKoE,MAAsB,IAAhBpE,KAAKjC,WAC7B,OAAO4J,GAITgB,aAAc,SAAShB,GACrB,IAAK,IAAIiB,EAAQ,GAAIzL,EAAI,EAAGkL,EAAI,EAAGlL,EAAIwK,EAAMzJ,OAAQf,IAAKkL,GAAK,EAC7DO,EAAMP,IAAM,IAAMV,EAAMxK,IAAO,GAAKkL,EAAI,GAC1C,OAAOO,GAITC,aAAc,SAASD,GACrB,IAAK,IAAIjB,EAAQ,GAAIU,EAAI,EAAGA,EAAmB,GAAfO,EAAM1K,OAAamK,GAAK,EACtDV,EAAMvK,KAAMwL,EAAMP,IAAM,KAAQ,GAAKA,EAAI,GAAO,KAClD,OAAOV,GAITmB,WAAY,SAASnB,GACnB,IAAK,IAAIoB,EAAM,GAAI5L,EAAI,EAAGA,EAAIwK,EAAMzJ,OAAQf,IAC1C4L,EAAI3L,MAAMuK,EAAMxK,KAAO,GAAGE,SAAS,KACnC0L,EAAI3L,MAAiB,GAAXuK,EAAMxK,IAAUE,SAAS,KAErC,OAAO0L,EAAI7C,KAAK,KAIlB8C,WAAY,SAASD,GACnB,IAAK,IAAIpB,EAAQ,GAAIsB,EAAI,EAAGA,EAAIF,EAAI7K,OAAQ+K,GAAK,EAC/CtB,EAAMvK,KAAK0C,SAASiJ,EAAIzL,OAAO2L,EAAG,GAAI,KACxC,OAAOtB,GAITuB,cAAe,SAASvB,GACtB,IAAK,IAAIwB,EAAS,GAAIhM,EAAI,EAAGA,EAAIwK,EAAMzJ,OAAQf,GAAK,EAElD,IADA,IAAIiM,EAAWzB,EAAMxK,IAAM,GAAOwK,EAAMxK,EAAI,IAAM,EAAKwK,EAAMxK,EAAI,GACxDkM,EAAI,EAAGA,EAAI,EAAGA,IACb,EAAJlM,EAAY,EAAJkM,GAAwB,EAAf1B,EAAMzJ,OACzBiL,EAAO/L,KAAK6K,EAAUqB,OAAQF,IAAY,GAAK,EAAIC,GAAM,KAEzDF,EAAO/L,KAAK,KAElB,OAAO+L,EAAOjD,KAAK,KAIrBqD,cAAe,SAASJ,GAEtBA,EAASA,EAAOhD,QAAQ,iBAAkB,IAE1C,IAAK,IAAIwB,EAAQ,GAAIxK,EAAI,EAAGqM,EAAQ,EAAGrM,EAAIgM,EAAOjL,OAC9CsL,IAAUrM,EAAI,EACH,GAATqM,GACJ7B,EAAMvK,MAAO6K,EAAU/I,QAAQiK,EAAOG,OAAOnM,EAAI,IAC1C6C,KAAKyJ,IAAI,GAAI,EAAID,EAAQ,GAAK,IAAgB,EAARA,EACtCvB,EAAU/I,QAAQiK,EAAOG,OAAOnM,MAAS,EAAY,EAARqM,GAEtD,OAAO7B,IAIXvL,EAAOD,QAAU+L,G,cC9FnB,IACMA,EACAb,EACAG,EAmEJkC,EArEIxB,EAAQ,EAAQ,IAChBb,EAAO,YACPG,EAAM,YAmEVkC,EAAM,SAAUhK,EAAS/B,GACvB,IAAIgM,EAAczB,EAAMW,aAjEnB,SAAUnJ,GAEXA,EAAQ8I,aAAeT,OACzBrI,EAAU2H,EAAKC,cAAc5H,GACJ,oBAAXkK,QAAoD,mBAAnBA,OAAOC,UAA0BD,OAAOC,SAASnK,GAChGA,EAAUL,MAAMyK,UAAUC,MAAMC,KAAKtK,EAAS,GACtCL,MAAM4K,QAAQvK,KACtBA,EAAUA,EAAQrC,YAIpB,IAAI6M,EAAKhC,EAAMS,aAAajJ,GACxByK,EAAsB,EAAjBzK,EAAQxB,OACbkM,EAAK,GACLC,EAAM,WACNC,GAAM,UACNC,GAAM,WACNC,EAAM,UACNC,GAAM,WAGVP,EAAEC,GAAK,IAAM,KAAS,GAAKA,EAAI,GAC/BD,EAA0B,IAAtBC,EAAI,KAAO,GAAM,IAAWA,EAEhC,IAAK,IAAIhN,EAAI,EAAGA,EAAI+M,EAAEhM,OAAQf,GAAK,GAAI,CAOrC,IANA,IAAIuN,EAAIL,EACJhC,EAAIiC,EACJrB,EAAIsB,EACJI,EAAIH,EACJI,EAAIH,EAECpB,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAE3B,GAAIA,EAAI,GACNe,EAAEf,GAAKa,EAAE/M,EAAIkM,OACV,CACH,IAAIjB,EAAIgC,EAAEf,EAAI,GAAKe,EAAEf,EAAI,GAAKe,EAAEf,EAAI,IAAMe,EAAEf,EAAI,IAChDe,EAAEf,GAAMjB,GAAK,EAAMA,IAAM,GAG3B,IAAIyC,GAAMR,GAAM,EAAMA,IAAO,IAAOI,GAAML,EAAEf,KAAO,IAC3CA,EAAI,GAA4B,YAAtBiB,EAAKC,GAAMD,EAAKE,GAC1BnB,EAAI,GAAsB,YAAhBiB,EAAKC,EAAKC,GACpBnB,EAAI,IAAMiB,EAAKC,EAAKD,EAAKE,EAAKD,EAAKC,GAAM,YAC/BF,EAAKC,EAAKC,GAAM,WAElCC,EAAKD,EACLA,EAAKD,EACLA,EAAMD,GAAM,GAAOA,IAAO,EAC1BA,EAAKD,EACLA,EAAKQ,EAGPR,GAAMK,EACNJ,GAAMjC,EACNkC,GAAMtB,EACNuB,GAAMG,EACNF,GAAMG,EAGR,MAAO,CAACP,EAAIC,EAAIC,EAAIC,EAAIC,GAKalN,CAAKmC,IAC1C,OAAO/B,GAAWA,EAAQmN,QAAUnB,EAChChM,GAAWA,EAAQoN,SAAWvD,EAAIE,cAAciC,GAChDzB,EAAMY,WAAWa,KAGnBqB,WAAa,GACjBtB,EAAIuB,YAAc,GAElB7O,EAAOD,QAAUuN,IC/EfwB,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,GAAGF,EAAyBE,GAC3B,OAAOF,EAAyBE,GAAUjP,QAG3C,IAAIC,EAAS8O,EAAyBE,GAAY,CAGjDjP,QAAS,IAOV,OAHAkP,EAAoBD,GAAUhP,EAAQA,EAAOD,QAASgP,GAG/C/O,EAAOD,QCjBf,OCFAgP,EAAoBR,EAAI,CAACxO,EAASmP,KACjC,IAAI,IAAI9M,KAAO8M,EACXH,EAAoBI,EAAED,EAAY9M,KAAS2M,EAAoBI,EAAEpP,EAASqC,IAC5Ed,OAAO8N,eAAerP,EAASqC,EAAK,CAAEiN,YAAY,EAAM1J,IAAKuJ,EAAW9M,MCJ3E2M,EAAoBO,EAAI,WACvB,GAA0B,iBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAO5L,MAAQ,IAAI6L,SAAS,cAAb,GACd,MAAOhB,GACR,GAAsB,iBAAXnF,OAAqB,OAAOA,QALjB,GCAxB0F,EAAoBI,EAAI,CAAChN,EAAKsN,IAASnO,OAAOoM,UAAUgC,eAAe9B,KAAKzL,EAAKsN,GCCjFV,EAAoBY,EAAK5P,IACH,oBAAX6P,QAA0BA,OAAOC,aAC1CvO,OAAO8N,eAAerP,EAAS6P,OAAOC,YAAa,CAAExN,MAAO,WAE7Df,OAAO8N,eAAerP,EAAS,aAAc,CAAEsC,OAAO,KJFhD0M,EAAoB,M","file":"alephbet.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AlephBet\"] = factory();\n\telse\n\t\troot[\"AlephBet\"] = factory();\n})(self, function() {\nreturn ","export default {\n  debug: false\n}\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import {v4} from \"uuid\"\nimport options from \"./options\"\n\nconst sha1 = require(\"sha1\")\n\nconst Utils = {\n  keys: Object.keys,\n  uuid: v4,\n\n  defaults: (obj, defaults) => {\n    for (const key in defaults) {\n      const value = defaults[key]\n      if (obj[key] === undefined) {\n        obj[key] = value\n      }\n    }\n    return obj\n  },\n\n  remove: (list, callback) => {\n    const deletions = []\n    const iterable = [...list]\n    for (let index = 0; index < iterable.length; index++) {\n      const el = iterable[index]\n      if (callback(el, index)) {\n        list.splice(list.indexOf(el), 1)\n        deletions.push(el)\n      }\n    }\n    return deletions\n  },\n\n  omit: (obj, ...keys) => {\n    const results = {...obj}\n    for (const key of Array.from([].concat.apply([], keys))) {\n      delete results[key]\n    }\n    return results\n  },\n\n  log: (message) => {\n    if (options.debug) {\n      // eslint-disable-next-line no-console\n      console.log(message)\n    }\n  },\n\n  sha1: (text) => sha1(text).toString(),\n\n  random(seed) {\n    if (!seed) return Math.random()\n    // a MUCH simplified version inspired by PlanOut.js\n    return parseInt(this.sha1(seed).substr(0, 13), 16) / 0xFFFFFFFFFFFFF\n  },\n\n  check_weights: (variants) => {\n    const contains_weight = []\n    for (const key in variants) {\n      const value = variants[key]; contains_weight.push(value.weight != null)\n    }\n    return contains_weight.every(has_weight => has_weight)\n  },\n\n  sum_weights: (variants) => {\n    let sum = 0\n    for (const key in variants) {\n      const value = variants[key]\n      sum += value.weight || 0\n    }\n    return sum\n  },\n\n  validate_weights: (variants) => {\n    const contains_weight = []\n    for (const value of Object.values(variants)) {\n      contains_weight.push(value.weight != null)\n    }\n    return contains_weight.every(has_weight =>\n      has_weight || contains_weight.every(has_weight => !has_weight)\n    )\n  }\n}\n\nexport default Utils\n","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","import utils from \"./utils\"\n\nclass Goal {\n  constructor(name, props = {}) {\n    this.name = name\n    this.props = props\n    utils.defaults(this.props, {unique: true})\n    this.experiments = []\n  }\n\n  add_experiment(experiment) {\n    this.experiments.push(experiment)\n  }\n\n  add_experiments(experiments) {\n    for (const experiment of experiments) this.add_experiment(experiment)\n  }\n\n  complete() {\n    for (const experiment of this.experiments) {\n      experiment.goal_complete(this.name, this.props)\n    }\n  }\n}\n\nexport default Goal\n","// a thin wrapper around localStorage checking if localStorage is available\nclass Storage {\n  constructor(namespace = \"alephbet\") {\n    this.namespace = namespace\n    try {\n      const check = \"localstorage_check\"\n      localStorage.setItem(check, check)\n      localStorage.removeItem(check)\n    } catch {\n      throw new Error(\"localStorage is not available\")\n    }\n  }\n\n  set(key, value) {\n    let storage = JSON.parse(localStorage.getItem(this.namespace) || \"{}\")\n    storage[key] = value\n    localStorage.setItem(this.namespace, JSON.stringify(storage))\n    return value\n  }\n\n  get(key) {\n    return JSON.parse(localStorage.getItem(this.namespace) || \"{}\")[key]\n  }\n}\n\nexport default Storage\n","import Storage from \"../storage\"\n\nconst LocalStorageAdapter = {\n  namespace: \"alephbet\",\n\n  set(key, value) {\n    return new Storage(this.namespace).set(key, value)\n  },\n\n  get(key) {\n    return new Storage(this.namespace).get(key)\n  }\n}\nexport default LocalStorageAdapter\n","import utils from \"../utils\"\n\nclass GoogleUniversalAnalyticsAdapter {\n  static namespace = \"alephbet\"\n\n  static _track(category, action, label) {\n    utils.log(\n      `Google Universal Analytics track: ${category}, ${action}, ${label}`\n    )\n    if (typeof global.ga !== \"function\") {\n      throw new Error(\n        \"ga not defined. Please make sure \" +\n        \"your Universal analytics is set up correctly\"\n      )\n    }\n    global.ga(\"send\", \"event\", category, action, label, {nonInteraction: 1})\n  }\n\n  static experiment_start(experiment, variant) {\n    this._track(this.namespace, `${experiment.name} | ${variant}`, \"Visitors\")\n  }\n\n  static goal_complete(experiment, variant, goal_name, _props) {\n    this._track(this.namespace, `${experiment.name} | ${variant}`, goal_name)\n  }\n}\n\nexport default GoogleUniversalAnalyticsAdapter\n","import utils from \"./utils\"\nimport LocalStorageAdapter from \"./adapters/local_storage_adapter\"\nimport GoogleUniversalAnalyticsAdapter from\n  \"./adapters/google_universal_analytics_adapter\"\n\nclass Experiment {\n  static _options = {\n    name: null,\n    variants: null,\n    user_id: null,\n    sample: 1.0,\n    trigger() {\n      return true\n    },\n    tracking_adapter: GoogleUniversalAnalyticsAdapter,\n    storage_adapter: LocalStorageAdapter\n  }\n\n  constructor(options = {}) {\n    this.options = options\n    utils.defaults(this.options, Experiment._options)\n    validate(this.options)\n    this.name = this.options.name\n    this.variants = this.options.variants\n    this.user_id = this.options.user_id\n    this.variant_names = utils.keys(this.variants)\n    this.run()\n  }\n\n  run() {\n    utils.log(`running with options: ${JSON.stringify(this.options)}`)\n    const variant = this.get_stored_variant()\n    if (variant) {\n      // a variant was already chosen. activate it\n      utils.log(`${variant} active`)\n      this.activate_variant(variant)\n    } else {\n      this.conditionally_activate_variant()\n    }\n  }\n\n  activate_variant(variant) {\n    this.variants[variant]?.activate(this)\n    this.storage().set(`${this.options.name}:variant`, variant)\n  }\n\n  // if experiment conditions match, pick and activate a variant, track experiment start\n  conditionally_activate_variant() {\n    if (!this.options.trigger()) return\n    utils.log(\"trigger set\")\n    if (!this.in_sample()) return\n    utils.log(\"in sample\")\n    const variant = this.pick_variant()\n    this.tracking().experiment_start(this, variant)\n    this.activate_variant(variant)\n  }\n\n  goal_complete(goal_name, props = {}) {\n    utils.defaults(props, {unique: true})\n    if (\n      props.unique &&\n      this.storage().get(`${this.options.name}:${goal_name}`)\n    ) return\n    const variant = this.get_stored_variant()\n    if (!variant) return\n    if (props.unique) {\n      this.storage().set(`${this.options.name}:${goal_name}`, true)\n    }\n    utils.log(\n      \"experiment: \" +\n      `${this.options.name} variant:${variant} goal:${goal_name} complete`\n    )\n    this.tracking().goal_complete(this, variant, goal_name, props)\n  }\n\n  get_stored_variant() {\n    return this.storage().get(`${this.options.name}:variant`)\n  }\n\n  pick_variant() {\n    const all_variants_have_weights = utils.check_weights(this.variants)\n    utils.log(`all variants have weights: ${all_variants_have_weights}`)\n    if (all_variants_have_weights) {\n      return this.pick_weighted_variant()\n    }\n    return this.pick_unweighted_variant()\n  }\n\n  pick_weighted_variant() {\n    // Choosing a weighted variant:\n    // For A, B, C with weights 1, 3, 6\n    // variants = A, B, C\n    // weights = 1, 3, 6\n    // weights_sum = 10 (sum of weights)\n    // weighted_index = 2.1 (random number between 0 and weight sum)\n    // ABBBCCCCCC\n    // ==^\n    // Select B\n    const weights_sum = utils.sum_weights(this.variants)\n    let weighted_index = Math.ceil((this._random(\"variant\") * weights_sum))\n    for (const [key, value] of Object.entries(this.variants)) {\n      // then we are substracting variant weight from selected number\n      // and it it reaches 0 (or below) we are selecting this variant\n      weighted_index -= value.weight\n      if (weighted_index <= 0) return key\n    }\n  }\n\n  pick_unweighted_variant() {\n    const partitions = 1.0 / this.variant_names.length\n    const chosen_partition = Math.floor(this._random(\"variant\") / partitions)\n    const variant = this.variant_names[chosen_partition]\n    utils.log(`${variant} picked`)\n    return variant\n  }\n\n  in_sample() {\n    let active = this.storage().get(`${this.options.name}:in_sample`)\n    if (typeof active !== \"undefined\") return active\n    active = this._random(\"sample\") <= this.options.sample\n    this.storage().set(`${this.options.name}:in_sample`, active)\n    return active\n  }\n\n  _random(salt) {\n    if (!this.user_id) return utils.random()\n    const seed = `${this.name}.${salt}.${this.user_id}`\n    return utils.random(seed)\n  }\n\n  add_goal(goal) {\n    goal.add_experiment(this)\n  }\n\n  add_goals(goals) {\n    for (const goal of goals) this.add_goal(goal)\n  }\n\n  storage() {\n    return this.options.storage_adapter\n  }\n\n  tracking() {\n    return this.options.tracking_adapter\n  }\n}\n\nconst validate = (options) => {\n  if (options.name === null) {\n    throw new Error(\"an experiment name must be specified\")\n  }\n  if (options.variants === null) {\n    throw new Error(\"variants must be provided\")\n  }\n  if (typeof options.trigger !== \"function\") {\n    throw new Error(\"trigger must be a function\")\n  }\n  const all_variants_have_weights = utils.validate_weights(options.variants)\n  if (!all_variants_have_weights) {\n    throw new Error(\"not all variants have weights\")\n  }\n}\n\nexport default Experiment\n","import LocalStorageAdapter from \"./local_storage_adapter\"\nimport utils from \"../utils\"\n\n// # A parent class Adapter for using the Alephbet backend API.\n// # uses jQuery to send data if `$.ajax` is found. Falls back on plain js xhr\n// # params:\n// # - url: track URL to post events to\n// # - namepsace (optional): allows setting different environments etc\n// # - storage (optional): storage adapter for the queue\nclass AlephbetAdapter {\n  queue_name = \"_alephbet_queue\"\n\n  constructor(url, namespace = \"alephbet\", storage = LocalStorageAdapter) {\n    this._storage = storage\n    this.url = url\n    this.namespace = namespace\n    this._queue = JSON.parse(this._storage.get(this.queue_name) || \"[]\")\n    this._flush()\n  }\n\n  _remove_quuid(quuid) {\n    return (err, _res) => {\n      if (err) return\n      utils.remove(this._queue, el => el.properties._quuid === quuid)\n      this._storage.set(this.queue_name, JSON.stringify(this._queue))\n    }\n  }\n\n  _jquery_get(url, data, callback) {\n    utils.log(\"send request using jQuery\")\n    return window.jQuery.ajax({\n      method: \"GET\",\n      url,\n      data,\n      success: callback\n    })\n  }\n\n  _plain_js_get(url, data, callback) {\n    utils.log(\"fallback on plain js xhr\")\n    const xhr = new XMLHttpRequest()\n    let params = []\n    for (const key of Object.keys(data)) {\n      params.push(`${encodeURIComponent(key)}=${encodeURIComponent(data[key])}`)\n    }\n    params = params.join(\"&\").replace(/%20/g, \"+\")\n    xhr.open(\"GET\", `${url}?${params}`)\n    xhr.onload = () => {\n      if (xhr.status === 200) callback()\n    }\n    return xhr.send()\n  }\n\n  _ajax_get(url, data, callback) {\n    if (window.jQuery?.ajax) {\n      return this._jquery_get(url, data, callback)\n    }\n    return this._plain_js_get(url, data, callback)\n  }\n\n  _flush() {\n    for (const item of this._queue) {\n      const callback = this._remove_quuid(item.properties._quuid)\n      this._ajax_get(this.url, utils.omit(item.properties, \"_quuid\"), callback)\n    }\n  }\n\n  _user_uuid(experiment, goal) {\n    if (!experiment.user_id) return utils.uuid()\n    // if goal is not unique, we track it every time. return a new random uuid\n    if (!goal.unique) return utils.uuid()\n    // for a given user id, namespace, goal and experiment, the uuid will always be the same\n    // this avoids counting goals twice for the same user across different devices\n    return utils.sha1(\n      `${this.namespace}.${experiment.name}.${goal.name}.${experiment.user_id}`\n    )\n  }\n\n  _track(experiment, variant, goal) {\n    utils.log(\n      \"Persistent Queue track: \" +\n      `${this.namespace}, ${experiment.name}, ${variant}, ${goal.name}`\n    )\n    if (this._queue.length > 100) this._queue.shift()\n    this._queue.push({\n      properties: {\n        experiment: experiment.name,\n        _quuid: utils.uuid(), // queue uuid (used only internally)\n        uuid: this._user_uuid(experiment, goal),\n        variant,\n        event: goal.name,\n        namespace: this.namespace\n      }\n    })\n    this._storage.set(this.queue_name, JSON.stringify(this._queue))\n    this._flush()\n  }\n\n  experiment_start(experiment, variant) {\n    this._track(experiment, variant, {name: \"participate\", unique: true})\n  }\n\n  goal_complete(experiment, variant, goal_name, props) {\n    this._track(experiment, variant, utils.defaults({name: goal_name}, props))\n  }\n}\n\nexport default AlephbetAdapter\n","import AlephbetAdapter from \"./alephbet_adapter\"\nimport utils from \"../utils\"\n\n// # Adapter for using the gimel backend. See https://github.com/Alephbet/gimel\n// # The main difference is the user_uuid generation (for backwards compatibility)\n// # params:\n// # - url: Gimel track URL to post events to\n// # - namepsace: namespace for Gimel (allows setting different environments etc)\n// # - storage (optional) - storage adapter for the queue\nclass GimelAdapter extends AlephbetAdapter {\n  queue_name = \"_gimel_queue\"\n\n  _user_uuid(experiment, goal) {\n    if (!experiment.user_id) return utils.uuid()\n    // if goal is not unique, we track it every time. return a new random uuid\n    if (!goal.unique) return utils.uuid()\n    // for a given user id, namespace and experiment, the uuid will always be the same\n    // this avoids counting goals twice for the same user across different devices\n    return utils.sha1(\n      `${this.namespace}.${experiment.name}.${experiment.user_id}`\n    )\n  }\n}\n\nexport default GimelAdapter\n","import AlephbetAdapter from \"./alephbet_adapter\"\n\n// Adapter for using the lamed backend. See https://github.com/Alephbet/lamed\n// inherits from AlephbetAdapter which uses the same backend API\nclass LamedAdapter extends AlephbetAdapter {\n  queue_name = \"_lamed_queue\"\n}\n\nexport default LamedAdapter\n","import utils from \"../utils\"\nimport LocalStorageAdapter from \"./local_storage_adapter\"\n\nclass PersistentQueueGoogleAnalyticsAdapter {\n  namespace = \"alephbet\"\n  queue_name = \"_ga_queue\"\n\n  constructor(storage = LocalStorageAdapter) {\n    this._storage = storage\n    this._queue = JSON.parse(this._storage.get(this.queue_name) || \"[]\")\n    this._flush()\n  }\n\n  _remove_uuid(uuid) {\n    return () => {\n      utils.remove(this._queue, el => el.uuid === uuid)\n      this._storage.set(this.queue_name, JSON.stringify(this._queue))\n    }\n  }\n\n  _flush() {\n    if (typeof global.ga !== \"function\") {\n      throw new Error(\n        \"ga not defined. \" +\n        \"Please make sure your Universal analytics is set up correctly\"\n      )\n    }\n    for (const item of this._queue) {\n      const callback = this._remove_uuid(item.uuid)\n      global.ga(\"send\", \"event\", item.category, item.action, item.label, {\n        hitCallback: callback,\n        nonInteraction: 1\n      })\n    }\n  }\n\n  _track(category, action, label) {\n    utils.log(\n      \"Persistent Queue Google Universal Analytics track: \" +\n      `${category}, ${action}, ${label}`\n    )\n    if (this._queue.length > 100) this._queue.shift()\n    this._queue.push({uuid: utils.uuid(), category, action, label})\n    this._storage.set(this.queue_name, JSON.stringify(this._queue))\n    this._flush()\n  }\n\n  experiment_start(experiment, variant) {\n    this._track(this.namespace, `${experiment.name} | ${variant}`, \"Visitors\")\n  }\n\n  goal_complete(experiment, variant, goal_name, _props) {\n    this._track(this.namespace, `${experiment.name} | ${variant}`, goal_name)\n  }\n}\n\nexport default PersistentQueueGoogleAnalyticsAdapter\n","import options from \"./options\"\nimport Goal from \"./goal\"\nimport Experiment from \"./experiment\"\n\nexport {Goal, Experiment}\nexport {default as utils} from \"./utils\"\nexport {default as options} from \"./options\"\nexport {default as GimelAdapter} from \"./adapters/gimel_adapter\"\nexport {default as LamedAdapter} from \"./adapters/lamed_adapter\"\nexport {default as AlephbetAdapter} from \"./adapters/alephbet_adapter\"\nexport {default as LocalStorageAdapter} from \"./adapters/local_storage_adapter\"\nexport {\n  default as PersistentQueueGoogleAnalyticsAdapter\n} from \"./adapters/persistent_queue_google_analytics_adapter\"\nexport {\n  default as GoogleUniversalAnalyticsAdapter\n} from \"./adapters/google_universal_analytics_adapter\"\n\nexport default {\n  options,\n  Goal,\n  Experiment\n}\n","var charenc = {\n  // UTF-8 encoding\n  utf8: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)));\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)));\n    }\n  },\n\n  // Binary encoding\n  bin: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      for (var bytes = [], i = 0; i < str.length; i++)\n        bytes.push(str.charCodeAt(i) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      for (var str = [], i = 0; i < bytes.length; i++)\n        str.push(String.fromCharCode(bytes[i]));\n      return str.join('');\n    }\n  }\n};\n\nmodule.exports = charenc;\n","(function() {\n  var base64map\n      = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',\n\n  crypt = {\n    // Bit-wise rotation left\n    rotl: function(n, b) {\n      return (n << b) | (n >>> (32 - b));\n    },\n\n    // Bit-wise rotation right\n    rotr: function(n, b) {\n      return (n << (32 - b)) | (n >>> b);\n    },\n\n    // Swap big-endian to little-endian and vice versa\n    endian: function(n) {\n      // If number given, swap endian\n      if (n.constructor == Number) {\n        return crypt.rotl(n, 8) & 0x00FF00FF | crypt.rotl(n, 24) & 0xFF00FF00;\n      }\n\n      // Else, assume array and swap all items\n      for (var i = 0; i < n.length; i++)\n        n[i] = crypt.endian(n[i]);\n      return n;\n    },\n\n    // Generate an array of any length of random bytes\n    randomBytes: function(n) {\n      for (var bytes = []; n > 0; n--)\n        bytes.push(Math.floor(Math.random() * 256));\n      return bytes;\n    },\n\n    // Convert a byte array to big-endian 32-bit words\n    bytesToWords: function(bytes) {\n      for (var words = [], i = 0, b = 0; i < bytes.length; i++, b += 8)\n        words[b >>> 5] |= bytes[i] << (24 - b % 32);\n      return words;\n    },\n\n    // Convert big-endian 32-bit words to a byte array\n    wordsToBytes: function(words) {\n      for (var bytes = [], b = 0; b < words.length * 32; b += 8)\n        bytes.push((words[b >>> 5] >>> (24 - b % 32)) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a hex string\n    bytesToHex: function(bytes) {\n      for (var hex = [], i = 0; i < bytes.length; i++) {\n        hex.push((bytes[i] >>> 4).toString(16));\n        hex.push((bytes[i] & 0xF).toString(16));\n      }\n      return hex.join('');\n    },\n\n    // Convert a hex string to a byte array\n    hexToBytes: function(hex) {\n      for (var bytes = [], c = 0; c < hex.length; c += 2)\n        bytes.push(parseInt(hex.substr(c, 2), 16));\n      return bytes;\n    },\n\n    // Convert a byte array to a base-64 string\n    bytesToBase64: function(bytes) {\n      for (var base64 = [], i = 0; i < bytes.length; i += 3) {\n        var triplet = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2];\n        for (var j = 0; j < 4; j++)\n          if (i * 8 + j * 6 <= bytes.length * 8)\n            base64.push(base64map.charAt((triplet >>> 6 * (3 - j)) & 0x3F));\n          else\n            base64.push('=');\n      }\n      return base64.join('');\n    },\n\n    // Convert a base-64 string to a byte array\n    base64ToBytes: function(base64) {\n      // Remove non-base-64 characters\n      base64 = base64.replace(/[^A-Z0-9+\\/]/ig, '');\n\n      for (var bytes = [], i = 0, imod4 = 0; i < base64.length;\n          imod4 = ++i % 4) {\n        if (imod4 == 0) continue;\n        bytes.push(((base64map.indexOf(base64.charAt(i - 1))\n            & (Math.pow(2, -2 * imod4 + 8) - 1)) << (imod4 * 2))\n            | (base64map.indexOf(base64.charAt(i)) >>> (6 - imod4 * 2)));\n      }\n      return bytes;\n    }\n  };\n\n  module.exports = crypt;\n})();\n","(function() {\n  var crypt = require('crypt'),\n      utf8 = require('charenc').utf8,\n      bin = require('charenc').bin,\n\n  // The core\n  sha1 = function (message) {\n    // Convert to byte array\n    if (message.constructor == String)\n      message = utf8.stringToBytes(message);\n    else if (typeof Buffer !== 'undefined' && typeof Buffer.isBuffer == 'function' && Buffer.isBuffer(message))\n      message = Array.prototype.slice.call(message, 0);\n    else if (!Array.isArray(message))\n      message = message.toString();\n\n    // otherwise assume byte array\n\n    var m  = crypt.bytesToWords(message),\n        l  = message.length * 8,\n        w  = [],\n        H0 =  1732584193,\n        H1 = -271733879,\n        H2 = -1732584194,\n        H3 =  271733878,\n        H4 = -1009589776;\n\n    // Padding\n    m[l >> 5] |= 0x80 << (24 - l % 32);\n    m[((l + 64 >>> 9) << 4) + 15] = l;\n\n    for (var i = 0; i < m.length; i += 16) {\n      var a = H0,\n          b = H1,\n          c = H2,\n          d = H3,\n          e = H4;\n\n      for (var j = 0; j < 80; j++) {\n\n        if (j < 16)\n          w[j] = m[i + j];\n        else {\n          var n = w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16];\n          w[j] = (n << 1) | (n >>> 31);\n        }\n\n        var t = ((H0 << 5) | (H0 >>> 27)) + H4 + (w[j] >>> 0) + (\n                j < 20 ? (H1 & H2 | ~H1 & H3) + 1518500249 :\n                j < 40 ? (H1 ^ H2 ^ H3) + 1859775393 :\n                j < 60 ? (H1 & H2 | H1 & H3 | H2 & H3) - 1894007588 :\n                         (H1 ^ H2 ^ H3) - 899497514);\n\n        H4 = H3;\n        H3 = H2;\n        H2 = (H1 << 30) | (H1 >>> 2);\n        H1 = H0;\n        H0 = t;\n      }\n\n      H0 += a;\n      H1 += b;\n      H2 += c;\n      H3 += d;\n      H4 += e;\n    }\n\n    return [H0, H1, H2, H3, H4];\n  },\n\n  // Public API\n  api = function (message, options) {\n    var digestbytes = crypt.wordsToBytes(sha1(message));\n    return options && options.asBytes ? digestbytes :\n        options && options.asString ? bin.bytesToString(digestbytes) :\n        crypt.bytesToHex(digestbytes);\n  };\n\n  api._blocksize = 16;\n  api._digestsize = 20;\n\n  module.exports = api;\n})();\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(217);\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"sourceRoot":""}