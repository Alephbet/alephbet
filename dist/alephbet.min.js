!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.AlephBet=f()}}(function(){var define;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(){function parse(s,buf,offset){var i=buf&&offset||0,ii=0;for(buf=buf||[],s.toLowerCase().replace(/[0-9a-f]{2}/g,function(oct){16>ii&&(buf[i+ii++]=_hexToByte[oct])});16>ii;)buf[i+ii++]=0;return buf}function unparse(buf,offset){var i=offset||0,bth=_byteToHex;return bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]}function v1(options,buf,offset){var i=buf&&offset||0,b=buf||[];options=options||{};var clockseq=null!=options.clockseq?options.clockseq:_clockseq,msecs=null!=options.msecs?options.msecs:(new Date).getTime(),nsecs=null!=options.nsecs?options.nsecs:_lastNSecs+1,dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(0>dt&&null==options.clockseq&&(clockseq=clockseq+1&16383),(0>dt||msecs>_lastMSecs)&&null==options.nsecs&&(nsecs=0),nsecs>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=msecs,_lastNSecs=nsecs,_clockseq=clockseq,msecs+=122192928e5;var tl=(1e4*(268435455&msecs)+nsecs)%4294967296;b[i++]=tl>>>24&255,b[i++]=tl>>>16&255,b[i++]=tl>>>8&255,b[i++]=255&tl;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255,b[i++]=255&tmh,b[i++]=tmh>>>24&15|16,b[i++]=tmh>>>16&255,b[i++]=clockseq>>>8|128,b[i++]=255&clockseq;for(var node=options.node||_nodeId,n=0;6>n;n++)b[i+n]=node[n];return buf?buf:unparse(b)}function v4(options,buf,offset){var i=buf&&offset||0;"string"==typeof options&&(buf="binary"==options?new BufferClass(16):null,options=null),options=options||{};var rnds=options.random||(options.rng||_rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf)for(var ii=0;16>ii;ii++)buf[i+ii]=rnds[ii];return buf||unparse(rnds)}var _rng,_global=this;if("function"==typeof _global.require)try{var _rb=_global.require("crypto").randomBytes;_rng=_rb&&function(){return _rb(16)}}catch(e){}if(!_rng&&_global.crypto&&crypto.getRandomValues){var _rnds8=new Uint8Array(16);_rng=function(){return crypto.getRandomValues(_rnds8),_rnds8}}if(!_rng){var _rnds=new Array(16);_rng=function(){for(var r,i=0;16>i;i++)0===(3&i)&&(r=4294967296*Math.random()),_rnds[i]=r>>>((3&i)<<3)&255;return _rnds}}for(var BufferClass="function"==typeof _global.Buffer?_global.Buffer:Array,_byteToHex=[],_hexToByte={},i=0;256>i;i++)_byteToHex[i]=(i+256).toString(16).substr(1),_hexToByte[_byteToHex[i]]=i;var _seedBytes=_rng(),_nodeId=[1|_seedBytes[0],_seedBytes[1],_seedBytes[2],_seedBytes[3],_seedBytes[4],_seedBytes[5]],_clockseq=16383&(_seedBytes[6]<<8|_seedBytes[7]),_lastMSecs=0,_lastNSecs=0,uuid=v4;if(uuid.v1=v1,uuid.v4=v4,uuid.parse=parse,uuid.unparse=unparse,uuid.BufferClass=BufferClass,"function"==typeof define&&define.amd)define(function(){return uuid});else if("undefined"!=typeof module&&module.exports)module.exports=uuid;else{var _previousRoot=_global.uuid;uuid.noConflict=function(){return _global.uuid=_previousRoot,uuid},_global.uuid=uuid}}).call(this)},{}],2:[function(require,module,exports){(function(global){"use strict";!function(root,factory){"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?module.exports=factory():root.store=factory()}(this,function(){function isLocalStorageNameSupported(){try{return localStorageName in win&&win[localStorageName]}catch(err){return!1}}var storage,store={},win="undefined"!=typeof window?window:global,doc=win.document,localStorageName="localStorage",scriptTag="script";if(store.disabled=!1,store.version="1.3.20",store.set=function(key,value){},store.get=function(key,defaultVal){},store.has=function(key){return void 0!==store.get(key)},store.remove=function(key){},store.clear=function(){},store.transact=function(key,defaultVal,transactionFn){null==transactionFn&&(transactionFn=defaultVal,defaultVal=null),null==defaultVal&&(defaultVal={});var val=store.get(key,defaultVal);transactionFn(val),store.set(key,val)},store.getAll=function(){},store.forEach=function(){},store.serialize=function(value){return JSON.stringify(value)},store.deserialize=function(value){if("string"!=typeof value)return void 0;try{return JSON.parse(value)}catch(e){return value||void 0}},isLocalStorageNameSupported())storage=win[localStorageName],store.set=function(key,val){return void 0===val?store.remove(key):(storage.setItem(key,store.serialize(val)),val)},store.get=function(key,defaultVal){var val=store.deserialize(storage.getItem(key));return void 0===val?defaultVal:val},store.remove=function(key){storage.removeItem(key)},store.clear=function(){storage.clear()},store.getAll=function(){var ret={};return store.forEach(function(key,val){ret[key]=val}),ret},store.forEach=function(callback){for(var i=0;i<storage.length;i++){var key=storage.key(i);callback(key,store.get(key))}};else if(doc&&doc.documentElement.addBehavior){var storageOwner,storageContainer;try{storageContainer=new ActiveXObject("htmlfile"),storageContainer.open(),storageContainer.write("<"+scriptTag+">document.w=window</"+scriptTag+'><iframe src="/favicon.ico"></iframe>'),storageContainer.close(),storageOwner=storageContainer.w.frames[0].document,storage=storageOwner.createElement("div")}catch(e){storage=doc.createElement("div"),storageOwner=doc.body}var withIEStorage=function(storeFunction){return function(){var args=Array.prototype.slice.call(arguments,0);args.unshift(storage),storageOwner.appendChild(storage),storage.addBehavior("#default#userData"),storage.load(localStorageName);var result=storeFunction.apply(store,args);return storageOwner.removeChild(storage),result}},forbiddenCharsRegex=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),ieKeyFix=function(key){return key.replace(/^d/,"___$&").replace(forbiddenCharsRegex,"___")};store.set=withIEStorage(function(storage,key,val){return key=ieKeyFix(key),void 0===val?store.remove(key):(storage.setAttribute(key,store.serialize(val)),storage.save(localStorageName),val)}),store.get=withIEStorage(function(storage,key,defaultVal){key=ieKeyFix(key);var val=store.deserialize(storage.getAttribute(key));return void 0===val?defaultVal:val}),store.remove=withIEStorage(function(storage,key){key=ieKeyFix(key),storage.removeAttribute(key),storage.save(localStorageName)}),store.clear=withIEStorage(function(storage){var attributes=storage.XMLDocument.documentElement.attributes;storage.load(localStorageName);for(var i=attributes.length-1;i>=0;i--)storage.removeAttribute(attributes[i].name);storage.save(localStorageName)}),store.getAll=function(storage){var ret={};return store.forEach(function(key,val){ret[key]=val}),ret},store.forEach=withIEStorage(function(storage,callback){for(var attr,attributes=storage.XMLDocument.documentElement.attributes,i=0;attr=attributes[i];++i)callback(attr.name,store.deserialize(storage.getAttribute(attr.name)))})}try{var testKey="__storejs__";store.set(testKey,testKey),store.get(testKey)!=testKey&&(store.disabled=!0),store.remove(testKey)}catch(e){store.disabled=!0}return store.enabled=!store.disabled,store})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(require,module,exports){var Adapters,Storage,utils,bind=function(fn,me){return function(){return fn.apply(me,arguments)}};utils=require("./utils"),Storage=require("./storage"),Adapters=function(){function Adapters(){}return Adapters.GimelAdapter=function(){function GimelAdapter(url,namespace,storage){null==storage&&(storage=Adapters.LocalStorageAdapter),this.goal_complete=bind(this.goal_complete,this),this.experiment_start=bind(this.experiment_start,this),this._storage=storage,this.url=url,this.namespace=namespace,this._queue=JSON.parse(this._storage.get(this.queue_name)||"[]"),this._flush()}return GimelAdapter.prototype.queue_name="_gimel_queue",GimelAdapter.prototype._remove_uuid=function(uuid){return function(_this){return function(err,res){return err?void 0:(utils.remove(_this._queue,function(el){return el.properties.uuid===uuid}),_this._storage.set(_this.queue_name,JSON.stringify(_this._queue)))}}(this)},GimelAdapter.prototype._jquery_get=function(url,data,callback){return utils.log("send request using jQuery"),$.ajax({method:"GET",url:url,data:data,success:callback})},GimelAdapter.prototype._plain_js_get=function(url,data,callback){var k,params,v,xhr;return utils.log("fallback on plain js xhr"),xhr=new XMLHttpRequest,params=function(){var results;results=[];for(k in data)v=data[k],results.push(encodeURIComponent(k)+"="+encodeURIComponent(v));return results}(),params=params.join("&").replace(/%20/g,"+"),xhr.open("GET",url+"?"+params),xhr.onload=function(){return 200===xhr.status?callback():void 0},xhr.send()},GimelAdapter.prototype._ajax_get=function(url,data,callback){return("undefined"!=typeof $&&null!==$?$.ajax:void 0)?this._jquery_get(url,data,callback):this._plain_js_get(url,data,callback)},GimelAdapter.prototype._flush=function(){var callback,i,item,len,ref,results;for(ref=this._queue,results=[],i=0,len=ref.length;len>i;i++)item=ref[i],callback=this._remove_uuid(item.properties.uuid),this._ajax_get(this.url,item.properties,callback),results.push(null);return results},GimelAdapter.prototype._track=function(experiment_name,variant,event){return utils.log("Persistent Queue Gimel track: "+this.namespace+", "+experiment_name+", "+variant+", "+event),this._queue.length>100&&this._queue.shift(),this._queue.push({properties:{experiment:experiment_name,uuid:utils.uuid(),variant:variant,event:event,namespace:this.namespace}}),this._storage.set(this.queue_name,JSON.stringify(this._queue)),this._flush()},GimelAdapter.prototype.experiment_start=function(experiment_name,variant){return this._track(experiment_name,variant,"participate")},GimelAdapter.prototype.goal_complete=function(experiment_name,variant,goal){return this._track(experiment_name,variant,goal)},GimelAdapter}(),Adapters.PersistentQueueGoogleAnalyticsAdapter=function(){function PersistentQueueGoogleAnalyticsAdapter(storage){null==storage&&(storage=Adapters.LocalStorageAdapter),this.goal_complete=bind(this.goal_complete,this),this.experiment_start=bind(this.experiment_start,this),this._storage=storage,this._queue=JSON.parse(this._storage.get(this.queue_name)||"[]"),this._flush()}return PersistentQueueGoogleAnalyticsAdapter.prototype.namespace="alephbet",PersistentQueueGoogleAnalyticsAdapter.prototype.queue_name="_ga_queue",PersistentQueueGoogleAnalyticsAdapter.prototype._remove_uuid=function(uuid){return function(_this){return function(){return utils.remove(_this._queue,function(el){return el.uuid===uuid}),_this._storage.set(_this.queue_name,JSON.stringify(_this._queue))}}(this)},PersistentQueueGoogleAnalyticsAdapter.prototype._flush=function(){var callback,i,item,len,ref,results;if("function"!=typeof ga)throw"ga not defined. Please make sure your Universal analytics is set up correctly";for(ref=this._queue,results=[],i=0,len=ref.length;len>i;i++)item=ref[i],callback=this._remove_uuid(item.uuid),results.push(ga("send","event",item.category,item.action,item.label,{hitCallback:callback,nonInteraction:1}));return results},PersistentQueueGoogleAnalyticsAdapter.prototype._track=function(category,action,label){return utils.log("Persistent Queue Google Universal Analytics track: "+category+", "+action+", "+label),this._queue.length>100&&this._queue.shift(),this._queue.push({uuid:utils.uuid(),category:category,action:action,label:label}),this._storage.set(this.queue_name,JSON.stringify(this._queue)),this._flush()},PersistentQueueGoogleAnalyticsAdapter.prototype.experiment_start=function(experiment_name,variant){return this._track(this.namespace,experiment_name+" | "+variant,"Visitors")},PersistentQueueGoogleAnalyticsAdapter.prototype.goal_complete=function(experiment_name,variant,goal){return this._track(this.namespace,experiment_name+" | "+variant,goal)},PersistentQueueGoogleAnalyticsAdapter}(),Adapters.PersistentQueueKeenAdapter=function(){function PersistentQueueKeenAdapter(keen_client,storage){null==storage&&(storage=Adapters.LocalStorageAdapter),this.goal_complete=bind(this.goal_complete,this),this.experiment_start=bind(this.experiment_start,this),this.client=keen_client,this._storage=storage,this._queue=JSON.parse(this._storage.get(this.queue_name)||"[]"),this._flush()}return PersistentQueueKeenAdapter.prototype.queue_name="_keen_queue",PersistentQueueKeenAdapter.prototype._remove_uuid=function(uuid){return function(_this){return function(err,res){return err?void 0:(utils.remove(_this._queue,function(el){return el.properties.uuid===uuid}),_this._storage.set(_this.queue_name,JSON.stringify(_this._queue)))}}(this)},PersistentQueueKeenAdapter.prototype._flush=function(){var callback,i,item,len,ref,results;for(ref=this._queue,results=[],i=0,len=ref.length;len>i;i++)item=ref[i],callback=this._remove_uuid(item.properties.uuid),results.push(this.client.addEvent(item.experiment_name,item.properties,callback));return results},PersistentQueueKeenAdapter.prototype._track=function(experiment_name,variant,event){return utils.log("Persistent Queue Keen track: "+experiment_name+", "+variant+", "+event),this._queue.length>100&&this._queue.shift(),this._queue.push({experiment_name:experiment_name,properties:{uuid:utils.uuid(),variant:variant,event:event}}),this._storage.set(this.queue_name,JSON.stringify(this._queue)),this._flush()},PersistentQueueKeenAdapter.prototype.experiment_start=function(experiment_name,variant){return this._track(experiment_name,variant,"participate")},PersistentQueueKeenAdapter.prototype.goal_complete=function(experiment_name,variant,goal){return this._track(experiment_name,variant,goal)},PersistentQueueKeenAdapter}(),Adapters.GoogleUniversalAnalyticsAdapter=function(){function GoogleUniversalAnalyticsAdapter(){}return GoogleUniversalAnalyticsAdapter.namespace="alephbet",GoogleUniversalAnalyticsAdapter._track=function(category,action,label){if(utils.log("Google Universal Analytics track: "+category+", "+action+", "+label),"function"!=typeof ga)throw"ga not defined. Please make sure your Universal analytics is set up correctly";return ga("send","event",category,action,label,{nonInteraction:1})},GoogleUniversalAnalyticsAdapter.experiment_start=function(experiment_name,variant){return GoogleUniversalAnalyticsAdapter._track(GoogleUniversalAnalyticsAdapter.namespace,experiment_name+" | "+variant,"Visitors")},GoogleUniversalAnalyticsAdapter.goal_complete=function(experiment_name,variant,goal){return GoogleUniversalAnalyticsAdapter._track(GoogleUniversalAnalyticsAdapter.namespace,experiment_name+" | "+variant,goal)},GoogleUniversalAnalyticsAdapter}(),Adapters.LocalStorageAdapter=function(){function LocalStorageAdapter(){}return LocalStorageAdapter.namespace="alephbet",LocalStorageAdapter.set=function(key,value){return new Storage(this.namespace).set(key,value)},LocalStorageAdapter.get=function(key){return new Storage(this.namespace).get(key)},LocalStorageAdapter}(),Adapters}(),module.exports=Adapters},{"./storage":6,"./utils":7}],4:[function(require,module,exports){var AlephBet,adapters,options,utils,bind=function(fn,me){return function(){return fn.apply(me,arguments)}};utils=require("./utils"),adapters=require("./adapters"),options=require("./options"),AlephBet=function(){function AlephBet(){}return AlephBet.options=options,AlephBet.utils=utils,AlephBet.GimelAdapter=adapters.GimelAdapter,AlephBet.PersistentQueueGoogleAnalyticsAdapter=adapters.PersistentQueueGoogleAnalyticsAdapter,AlephBet.PersistentQueueKeenAdapter=adapters.PersistentQueueKeenAdapter,AlephBet.Experiment=function(){function Experiment(options1){this.options=null!=options1?options1:{},this.add_goals=bind(this.add_goals,this),this.add_goal=bind(this.add_goal,this),utils.defaults(this.options,Experiment._options),_validate.call(this),this.name=this.options.name,this.variants=this.options.variants,this.variant_names=utils.keys(this.variants),_run.call(this)}var _run,_validate;return Experiment._options={name:null,variants:null,sample:1,trigger:function(){return!0},tracking_adapter:adapters.GoogleUniversalAnalyticsAdapter,storage_adapter:adapters.LocalStorageAdapter},Experiment.prototype.run=function(){var variant;return utils.log("running with options: "+JSON.stringify(this.options)),(variant=this.get_stored_variant())?(utils.log(variant+" active"),this.activate_variant(variant)):this.conditionally_activate_variant()},_run=function(){return this.run()},Experiment.prototype.activate_variant=function(variant){var ref;return null!=(ref=this.variants[variant])&&ref.activate(this),this.storage().set(this.options.name+":variant",variant)},Experiment.prototype.conditionally_activate_variant=function(){var variant;if(this.options.trigger()&&(utils.log("trigger set"),this.in_sample()))return utils.log("in sample"),variant=this.pick_variant(),this.tracking().experiment_start(this.options.name,variant),this.activate_variant(variant)},Experiment.prototype.goal_complete=function(goal_name,props){var variant;return null==props&&(props={}),utils.defaults(props,{unique:!0}),props.unique&&this.storage().get(this.options.name+":"+goal_name)||!(variant=this.get_stored_variant())?void 0:(props.unique&&this.storage().set(this.options.name+":"+goal_name,!0),utils.log("experiment: "+this.options.name+" variant:"+variant+" goal:"+goal_name+" complete"),this.tracking().goal_complete(this.options.name,variant,goal_name))},Experiment.prototype.get_stored_variant=function(){return this.storage().get(this.options.name+":variant")},Experiment.prototype.pick_variant=function(){var chosen_partition,partitions,variant;return partitions=1/this.variant_names.length,chosen_partition=Math.floor(Math.random()/partitions),variant=this.variant_names[chosen_partition],utils.log(variant+" picked"),variant},Experiment.prototype.in_sample=function(){var active;return active=this.storage().get(this.options.name+":in_sample"),"undefined"!=typeof active?active:(active=Math.random()<=this.options.sample,this.storage().set(this.options.name+":in_sample",active),active)},Experiment.prototype.add_goal=function(goal){return goal.add_experiment(this)},Experiment.prototype.add_goals=function(goals){var goal,i,len,results;for(results=[],i=0,len=goals.length;len>i;i++)goal=goals[i],results.push(this.add_goal(goal));return results},Experiment.prototype.storage=function(){return this.options.storage_adapter},Experiment.prototype.tracking=function(){return this.options.tracking_adapter},_validate=function(){if(null===this.options.name)throw"an experiment name must be specified";if(null===this.options.variants)throw"variants must be provided";if("function"!=typeof this.options.trigger)throw"trigger must be a function"},Experiment}(),AlephBet.Goal=function(){function Goal(name,props1){this.name=name,this.props=null!=props1?props1:{},utils.defaults(this.props,{unique:!0}),this.experiments=[]}return Goal.prototype.add_experiment=function(experiment){return this.experiments.push(experiment)},Goal.prototype.add_experiments=function(experiments){var experiment,i,len,results;for(results=[],i=0,len=experiments.length;len>i;i++)experiment=experiments[i],results.push(this.add_experiment(experiment));return results},Goal.prototype.complete=function(){var experiment,i,len,ref,results;for(ref=this.experiments,results=[],i=0,len=ref.length;len>i;i++)experiment=ref[i],results.push(experiment.goal_complete(this.name,this.props));return results},Goal}(),AlephBet}(),module.exports=AlephBet},{"./adapters":3,"./options":5,"./utils":7}],5:[function(require,module,exports){module.exports={debug:!1}},{}],6:[function(require,module,exports){var Storage,store;store=require("store"),Storage=function(){function Storage(namespace){if(this.namespace=null!=namespace?namespace:"alephbet",!store.enabled)throw"local storage not supported";this.storage=store.get(this.namespace)||{}}return Storage.prototype.set=function(key,value){return this.storage[key]=value,store.set(this.namespace,this.storage),value},Storage.prototype.get=function(key){return this.storage[key]},Storage}(),module.exports=Storage},{store:2}],7:[function(require,module,exports){var Utils,_,options,uuid;_=require("lodash.custom"),uuid=require("node-uuid"),options=require("./options"),Utils=function(){function Utils(){}return Utils.defaults=_.defaults,Utils.keys=_.keys,Utils.remove=_.remove,Utils.log=function(message){return options.debug?console.log(message):void 0},Utils.uuid=uuid.v4,Utils}(),module.exports=Utils},{"./options":5,"lodash.custom":8,"node-uuid":1}],8:[function(require,module,exports){(function(global){(function(){function B(a){return!!a&&"object"==typeof a}function n(){}function Sa(a,b){var c=-1,e=a.length;for(b||(b=Array(e));++c<e;)b[c]=a[c];return b}function ra(a,b){for(var c=-1,e=a.length;++c<e&&!1!==b(a[c],c,a););return a}function Ta(a,b){for(var c=-1,e=a.length;++c<e;)if(b(a[c],c,a))return!0;return!1}function sa(a,b){var c;if(null==b)c=a;else{c=C(b);var e=a;e||(e={});for(var d=-1,f=c.length;++d<f;){var h=c[d];e[h]=b[h]}c=e}return c}function ta(a,b,c){var e=typeof a;return"function"==e?b===p?a:ua(a,b,c):null==a?ha:"object"==e?va(a):b===p?wa(a):Ua(a,b)}function xa(a,b,c,e,d,f,h){var g;if(c&&(g=d?c(a,e,d):c(a)),g!==p)return g;if(!v(a))return a;if(e=y(a)){if(g=Va(a),!b)return Sa(a,g)}else{var l=A.call(a),m=l==H;if(l!=t&&l!=I&&(!m||d))return q[l]?Xa(a,l,b):d?a:{};if(Q(a))return d?a:{};if(g=Wa(m?{}:a),!b)return sa(g,a)}for(f||(f=[]),h||(h=[]),d=f.length;d--;)if(f[d]==a)return h[d];return f.push(a),h.push(g),(e?ra:Ya)(a,function(d,e){g[e]=xa(d,b,c,e,a,f,h)}),g}function Ya(a,b){return Za(a,b,C)}function ya(a,b,c){if(null!=a){a=z(a),c!==p&&c in a&&(b=[c]),c=0;for(var e=b.length;null!=a&&e>c;)a=z(a)[b[c++]];return c&&c==e?a:p}}function ia(a,b,c,e,d,f){if(a===b)a=!0;else if(null==a||null==b||!v(a)&&!B(b))a=a!==a&&b!==b;else a:{var h=ia,g=y(a),l=y(b),m=F,k=F;g||(m=A.call(a),m==I?m=t:m!=t&&(g=ja(a))),l||(k=A.call(b),k==I?k=t:k!=t&&ja(b));var p=m==t&&!Q(a),l=k==t&&!Q(b),k=m==k;if(!k||g||p){if(!e&&(m=p&&u.call(a,"__wrapped__"),l=l&&u.call(b,"__wrapped__"),m||l)){a=h(m?a.value():a,l?b.value():b,c,e,d,f);break a}if(k){for(d||(d=[]),f||(f=[]),m=d.length;m--;)if(d[m]==a){a=f[m]==b;break a}d.push(a),f.push(b),a=(g?$a:ab)(a,b,h,c,e,d,f),d.pop(),f.pop()}else a=!1}else a=bb(a,b,m)}return a}function cb(a,b){var c=b.length,e=c;if(null==a)return!e;for(a=z(a);c--;){var d=b[c];if(d[2]?d[1]!==a[d[0]]:!(d[0]in a))return!1}for(;++c<e;){var d=b[c],f=d[0],h=a[f],g=d[1];if(d[2]){if(h===p&&!(f in a))return!1}else if(d=p,d===p?!ia(g,h,void 0,!0):!d)return!1}return!0}function va(a){var b=db(a);if(1==b.length&&b[0][2]){var c=b[0][0],e=b[0][1];return function(a){return null==a?!1:(a=z(a),a[c]===e&&(e!==p||c in a))}}return function(a){return cb(a,b)}}function Ua(a,b){var c=y(a),e=za(a)&&b===b&&!v(b),d=a+"";return a=Aa(a),function(f){if(null==f)return!1;var h=d;if(f=z(f),!(!c&&e||h in f)){if(1!=a.length){var h=a,g=0,l=-1,m=-1,k=h.length,g=null==g?0:+g||0;for(0>g&&(g=-g>k?0:k+g),l=l===p||l>k?k:+l||0,0>l&&(l+=k),k=g>l?0:l-g>>>0,g>>>=0,l=Array(k);++m<k;)l[m]=h[m+g];f=ya(f,l)}if(null==f)return!1;h=Ba(a),f=z(f)}return f[h]===b?b!==p||h in f:ia(b,f[h],p,!0)}}function Ca(a){return function(b){return null==b?p:z(b)[a]}}function eb(a){var b=a+"";return a=Aa(a),function(c){return ya(c,a,b)}}function ua(a,b,c){if("function"!=typeof a)return ha;if(b===p)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,f){return a.call(b,c,d,f)};case 4:return function(c,d,f,h){return a.call(b,c,d,f,h)};case 5:return function(c,d,f,h,g){return a.call(b,c,d,f,h,g)}}return function(){return a.apply(b,arguments)}}function Da(a){var b=new fb(a.byteLength);return new ka(b).set(new ka(a)),b}function $a(a,b,c,e,d,f,h){var g=-1,l=a.length,m=b.length;if(l!=m&&!(d&&m>l))return!1;for(;++g<l;){var k=a[g],m=b[g],n=e?e(d?m:k,d?k:m,g):p;if(n!==p){if(n)continue;return!1}if(d){if(!Ta(b,function(a){return k===a||c(k,a,e,d,f,h)}))return!1}else if(k!==m&&!c(k,m,e,d,f,h))return!1}return!0}function bb(a,b,c){switch(c){case J:case K:return+a==+b;case L:return a.name==b.name&&a.message==b.message;case M:return a!=+a?b!=+b:a==+b;case N:case D:return a==b+""}return!1}function ab(a,b,c,e,d,f,h){var g=C(a),l=g.length,m=C(b).length;if(l!=m&&!d)return!1;for(m=l;m--;){var k=g[m];if(!(d?k in b:u.call(b,k)))return!1}for(var n=d;++m<l;){var k=g[m],q=a[k],r=b[k],s=e?e(d?r:q,d?q:r,k):p;if(s===p?!c(q,r,e,d,f,h):!s)return!1;n||(n="constructor"==k)}return n||(c=a.constructor,e=b.constructor,!(c!=e&&"constructor"in a&&"constructor"in b)||"function"==typeof c&&c instanceof c&&"function"==typeof e&&e instanceof e)?!0:!1}function db(a){a=Ea(a);for(var b=a.length;b--;){var c=a[b][1];a[b][2]=c===c&&!v(c)}return a}function Fa(a,b){var c=null==a?p:a[b];return Ga(c)?c:p}function Va(a){var b=a.length,c=new a.constructor(b);return b&&"string"==typeof a[0]&&u.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function Wa(a){return a=a.constructor,"function"==typeof a&&a instanceof a||(a=Object),new a}function Xa(a,b,c){var e=a.constructor;switch(b){case la:return Da(a);case J:case K:return new e(+a);case R:case S:case T:case U:case V:case W:case X:case Y:case Z:return e instanceof e&&(e=w[b]),b=a.buffer,new e(c?Da(b):b,a.byteOffset,a.length);case M:case D:return new e(a);case N:var d=new e(a.source,gb.exec(a));d.lastIndex=a.lastIndex}return d}function $(a,b){return a="number"==typeof a||hb.test(a)?+a:-1,b=null==b?Ha:b,a>-1&&0==a%1&&b>a}function Ia(a,b,c){if(!v(c))return!1;var e=typeof b;return("number"==e?null!=c&&E(ma(c))&&$(b,c.length):"string"==e&&b in c)?(b=c[b],a===a?a===b:b!==b):!1}function za(a){var b=typeof a;return"string"==b&&ib.test(a)||"number"==b?!0:y(a)?!1:!jb.test(a)||!1}function E(a){return"number"==typeof a&&a>-1&&0==a%1&&Ha>=a}function Ja(a){for(var b=Ka(a),c=b.length,e=c&&a.length,d=!!e&&E(e)&&(y(a)||na(a)||aa(a)),f=-1,h=[];++f<c;){var g=b[f];(d&&$(g,e)||u.call(a,g))&&h.push(g)}return h}function z(a){if(n.support.unindexedChars&&aa(a)){for(var b=-1,c=a.length,e=Object(a);++b<c;)e[b]=a.charAt(b);return e}return v(a)?a:Object(a)}function Aa(a){if(y(a))return a;var b=[];return(null==a?"":a+"").replace(kb,function(a,e,d,f){b.push(d?f.replace(lb,"$1"):e||a)}),b}function Ba(a){var b=a?a.length:0;return b?a[b-1]:p}function oa(a,b){if("function"!=typeof a)throw new TypeError(mb);return b=La(b===p?a.length-1:+b||0,0),function(){for(var c=arguments,e=-1,d=La(c.length-b,0),f=Array(d);++e<d;)f[e]=c[b+e];switch(b){case 0:return a.call(this,f);case 1:return a.call(this,c[0],f);case 2:return a.call(this,c[0],c[1],f)}for(d=Array(b+1),e=-1;++e<b;)d[e]=c[e];return d[b]=f,a.apply(this,d)}}function na(a){return B(a)&&null!=a&&E(ma(a))&&u.call(a,"callee")&&!ba.call(a,"callee")}function ca(a){return v(a)&&A.call(a)==H}function v(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function Ga(a){return null==a?!1:ca(a)?Ma.test(Na.call(a)):B(a)&&(Q(a)?Ma:nb).test(a)}function aa(a){return"string"==typeof a||B(a)&&A.call(a)==D}function ja(a){return B(a)&&E(a.length)&&!!r[A.call(a)]}function Ka(a){if(null==a)return[];v(a)||(a=Object(a));for(var b=a.length,c=n.support,b=b&&E(b)&&(y(a)||na(a)||aa(a))&&b||0,e=a.constructor,d=-1,e=ca(e)&&e.prototype||G,f=e===a,h=Array(b),g=b>0,l=c.enumErrorProps&&(a===da||a instanceof Error),m=c.enumPrototypes&&ca(a);++d<b;)h[d]=d+"";for(var k in a)m&&"prototype"==k||l&&("message"==k||"name"==k)||g&&$(k,b)||"constructor"==k&&(f||!u.call(a,k))||h.push(k);if(c.nonEnumShadows&&a!==G)for(b=a===ob?D:a===da?L:A.call(a),c=s[b]||s[t],b==t&&(e=G),b=pa.length;b--;)k=pa[b],d=c[k],f&&d||(d?!u.call(a,k):a[k]===e[k])||h.push(k);return h}function Ea(a){a=z(a);for(var b=-1,c=C(a),e=c.length,d=Array(e);++b<e;){var f=c[b];d[b]=[f,a[f]]}return d}function ea(a,b,c){return c&&Ia(a,b,c)&&(b=p),B(a)?Oa(a):ta(a,b)}function ha(a){return a}function Oa(a){return va(xa(a,!0))}function wa(a){return za(a)?Ca(a):eb(a)}var p,mb="Expected a function",I="[object Arguments]",F="[object Array]",J="[object Boolean]",K="[object Date]",L="[object Error]",H="[object Function]",M="[object Number]",t="[object Object]",N="[object RegExp]",D="[object String]",la="[object ArrayBuffer]",R="[object Float32Array]",S="[object Float64Array]",T="[object Int8Array]",U="[object Int16Array]",V="[object Int32Array]",W="[object Uint8Array]",X="[object Uint8ClampedArray]",Y="[object Uint16Array]",Z="[object Uint32Array]",jb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,ib=/^\w*$/,kb=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,lb=/\\(\\)?/g,gb=/\w*$/,nb=/^\[object .+?Constructor\]$/,hb=/^\d+$/,pa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),r={};r[R]=r[S]=r[T]=r[U]=r[V]=r[W]=r[X]=r[Y]=r[Z]=!0,r[I]=r[F]=r[la]=r[J]=r[K]=r[L]=r[H]=r["[object Map]"]=r[M]=r[t]=r[N]=r["[object Set]"]=r[D]=r["[object WeakMap]"]=!1;var q={};q[I]=q[F]=q[la]=q[J]=q[K]=q[R]=q[S]=q[T]=q[U]=q[V]=q[M]=q[t]=q[N]=q[D]=q[W]=q[X]=q[Y]=q[Z]=!0,q[L]=q[H]=q["[object Map]"]=q["[object Set]"]=q["[object WeakMap]"]=!1;var fa={"function":!0,object:!0},ga=fa[typeof exports]&&exports&&!exports.nodeType&&exports,O=fa[typeof module]&&module&&!module.nodeType&&module,pb=fa[typeof self]&&self&&self.Object&&self,Pa=fa[typeof window]&&window&&window.Object&&window,qb=O&&O.exports===ga&&ga,x=ga&&O&&"object"==typeof global&&global&&global.Object&&global||Pa!==(this&&this.window)&&Pa||pb||this,Q=function(){try{Object({toString:0}+"")}catch(a){return function(){return!1}}return function(a){return"function"!=typeof a.toString&&"string"==typeof(a+"")}}(),rb=Array.prototype,da=Error.prototype,G=Object.prototype,ob=String.prototype,Na=Function.prototype.toString,u=G.hasOwnProperty,A=G.toString,Ma=RegExp("^"+Na.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fb=x.ArrayBuffer,ba=G.propertyIsEnumerable,Qa=rb.splice,ka=x.Uint8Array,sb=Fa(Array,"isArray"),Ra=Fa(Object,"keys"),La=Math.max,Ha=9007199254740991,w={};w[R]=x.Float32Array,w[S]=x.Float64Array,w[T]=x.Int8Array,w[U]=x.Int16Array,w[V]=x.Int32Array,w[W]=ka,w[X]=x.Uint8ClampedArray,w[Y]=x.Uint16Array,w[Z]=x.Uint32Array;var s={};s[F]=s[K]=s[M]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},s[J]=s[D]={constructor:!0,toString:!0,valueOf:!0},s[L]=s[H]=s[N]={constructor:!0,toString:!0},s[t]={constructor:!0},ra(pa,function(a){for(var b in s)if(u.call(s,b)){var c=s[b];c[a]=u.call(c,a)}});var P=n.support={};!function(a){function b(){this.x=a}var c={0:a,length:a},e=[];b.prototype={valueOf:a,y:a};for(var d in new b)e.push(d);P.enumErrorProps=ba.call(da,"message")||ba.call(da,"name"),P.enumPrototypes=ba.call(b,"prototype"),P.nonEnumShadows=!/valueOf/.test(e),P.spliceObjects=(Qa.call(c,0,1),!c[0]),P.unindexedChars="xx"!="x"[0]+Object("x")[0]}(1,0);var Za=function(a){return function(b,c,e){var d=z(b);e=e(b);for(var f=e.length,h=a?f:-1;a?h--:++h<f;){var g=e[h];if(!1===c(d[g],g,d))break}return b}}(),ma=Ca("length"),y=sb||function(a){return B(a)&&E(a.length)&&A.call(a)==F},qa=function(a){return oa(function(b,c){var e=-1,d=null==b?0:c.length,f=d>2?c[d-2]:p,h=d>2?c[2]:p,g=d>1?c[d-1]:p;for("function"==typeof f?(f=ua(f,g,5),d-=2):(f="function"==typeof g?g:p,d-=f?1:0),h&&Ia(c[0],c[1],h)&&(f=3>d?p:f,d=1);++e<d;)(h=c[e])&&a(b,h,f);return b})}(function(a,b,c){if(c)for(var e=-1,d=C(b),f=d.length;++e<f;){
var h=d[e],g=a[h],l=c(g,b[h],h,a,b);(l===l?l===g:g!==g)&&(g!==p||h in a)||(a[h]=l)}else a=sa(a,b);return a}),tb=function(a,b){return oa(function(c){var e=c[0];return null==e?e:(c.push(b),a.apply(p,c))})}(qa,function(a,b){return a===p?b:a}),C=Ra?function(a){var b=null==a?p:a.constructor;return"function"==typeof b&&b.prototype===a||("function"==typeof a?n.support.enumPrototypes:null!=a&&E(ma(a)))?Ja(a):v(a)?Ra(a):[]}:Ja;n.assign=qa,n.callback=ea,n.defaults=tb,n.keys=C,n.keysIn=Ka,n.matches=Oa,n.pairs=Ea,n.property=wa,n.remove=function(a,b,c){var e=[];if(!a||!a.length)return e;var d=-1,f=[],h=a.length,g=n.callback||ea,g=g===ea?ta:g;for(b=g(b,c,3);++d<h;)c=a[d],b(c,d,a)&&(e.push(c),f.push(d));for(b=a?f.length:0;b--;)if(d=f[b],d!=l&&$(d)){var l=d;Qa.call(a,d,1)}return e},n.restParam=oa,n.extend=qa,n.iteratee=ea,n.identity=ha,n.isArguments=na,n.isArray=y,n.isFunction=ca,n.isNative=Ga,n.isObject=v,n.isString=aa,n.isTypedArray=ja,n.last=Ba,n.VERSION="3.10.0",ga&&O&&qb&&((O.exports=n)._=n)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[4])(4)});
