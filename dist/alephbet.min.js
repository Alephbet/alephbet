!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.AlephBet=f()}}(function(){var define;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(){function parse(s,buf,offset){var i=buf&&offset||0,ii=0;for(buf=buf||[],s.toLowerCase().replace(/[0-9a-f]{2}/g,function(oct){16>ii&&(buf[i+ii++]=_hexToByte[oct])});16>ii;)buf[i+ii++]=0;return buf}function unparse(buf,offset){var i=offset||0,bth=_byteToHex;return bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]}function v1(options,buf,offset){var i=buf&&offset||0,b=buf||[];options=options||{};var clockseq=null!=options.clockseq?options.clockseq:_clockseq,msecs=null!=options.msecs?options.msecs:(new Date).getTime(),nsecs=null!=options.nsecs?options.nsecs:_lastNSecs+1,dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(0>dt&&null==options.clockseq&&(clockseq=clockseq+1&16383),(0>dt||msecs>_lastMSecs)&&null==options.nsecs&&(nsecs=0),nsecs>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=msecs,_lastNSecs=nsecs,_clockseq=clockseq,msecs+=122192928e5;var tl=(1e4*(268435455&msecs)+nsecs)%4294967296;b[i++]=tl>>>24&255,b[i++]=tl>>>16&255,b[i++]=tl>>>8&255,b[i++]=255&tl;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255,b[i++]=255&tmh,b[i++]=tmh>>>24&15|16,b[i++]=tmh>>>16&255,b[i++]=clockseq>>>8|128,b[i++]=255&clockseq;for(var node=options.node||_nodeId,n=0;6>n;n++)b[i+n]=node[n];return buf?buf:unparse(b)}function v4(options,buf,offset){var i=buf&&offset||0;"string"==typeof options&&(buf="binary"==options?new BufferClass(16):null,options=null),options=options||{};var rnds=options.random||(options.rng||_rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf)for(var ii=0;16>ii;ii++)buf[i+ii]=rnds[ii];return buf||unparse(rnds)}var _rng,_global=this;if("function"==typeof _global.require)try{var _rb=_global.require("crypto").randomBytes;_rng=_rb&&function(){return _rb(16)}}catch(e){}if(!_rng&&_global.crypto&&crypto.getRandomValues){var _rnds8=new Uint8Array(16);_rng=function(){return crypto.getRandomValues(_rnds8),_rnds8}}if(!_rng){var _rnds=new Array(16);_rng=function(){for(var r,i=0;16>i;i++)0===(3&i)&&(r=4294967296*Math.random()),_rnds[i]=r>>>((3&i)<<3)&255;return _rnds}}for(var BufferClass="function"==typeof _global.Buffer?_global.Buffer:Array,_byteToHex=[],_hexToByte={},i=0;256>i;i++)_byteToHex[i]=(i+256).toString(16).substr(1),_hexToByte[_byteToHex[i]]=i;var _seedBytes=_rng(),_nodeId=[1|_seedBytes[0],_seedBytes[1],_seedBytes[2],_seedBytes[3],_seedBytes[4],_seedBytes[5]],_clockseq=16383&(_seedBytes[6]<<8|_seedBytes[7]),_lastMSecs=0,_lastNSecs=0,uuid=v4;if(uuid.v1=v1,uuid.v4=v4,uuid.parse=parse,uuid.unparse=unparse,uuid.BufferClass=BufferClass,"function"==typeof define&&define.amd)define(function(){return uuid});else if("undefined"!=typeof module&&module.exports)module.exports=uuid;else{var _previousRoot=_global.uuid;uuid.noConflict=function(){return _global.uuid=_previousRoot,uuid},_global.uuid=uuid}}).call(this)},{}],2:[function(require,module,exports){(function(global){"use strict";!function(root,factory){"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?module.exports=factory():root.store=factory()}(this,function(){function isLocalStorageNameSupported(){try{return localStorageName in win&&win[localStorageName]}catch(err){return!1}}var storage,store={},win="undefined"!=typeof window?window:global,doc=win.document,localStorageName="localStorage",scriptTag="script";if(store.disabled=!1,store.version="1.3.20",store.set=function(key,value){},store.get=function(key,defaultVal){},store.has=function(key){return void 0!==store.get(key)},store.remove=function(key){},store.clear=function(){},store.transact=function(key,defaultVal,transactionFn){null==transactionFn&&(transactionFn=defaultVal,defaultVal=null),null==defaultVal&&(defaultVal={});var val=store.get(key,defaultVal);transactionFn(val),store.set(key,val)},store.getAll=function(){},store.forEach=function(){},store.serialize=function(value){return JSON.stringify(value)},store.deserialize=function(value){if("string"!=typeof value)return void 0;try{return JSON.parse(value)}catch(e){return value||void 0}},isLocalStorageNameSupported())storage=win[localStorageName],store.set=function(key,val){return void 0===val?store.remove(key):(storage.setItem(key,store.serialize(val)),val)},store.get=function(key,defaultVal){var val=store.deserialize(storage.getItem(key));return void 0===val?defaultVal:val},store.remove=function(key){storage.removeItem(key)},store.clear=function(){storage.clear()},store.getAll=function(){var ret={};return store.forEach(function(key,val){ret[key]=val}),ret},store.forEach=function(callback){for(var i=0;i<storage.length;i++){var key=storage.key(i);callback(key,store.get(key))}};else if(doc&&doc.documentElement.addBehavior){var storageOwner,storageContainer;try{storageContainer=new ActiveXObject("htmlfile"),storageContainer.open(),storageContainer.write("<"+scriptTag+">document.w=window</"+scriptTag+'><iframe src="/favicon.ico"></iframe>'),storageContainer.close(),storageOwner=storageContainer.w.frames[0].document,storage=storageOwner.createElement("div")}catch(e){storage=doc.createElement("div"),storageOwner=doc.body}var withIEStorage=function(storeFunction){return function(){var args=Array.prototype.slice.call(arguments,0);args.unshift(storage),storageOwner.appendChild(storage),storage.addBehavior("#default#userData"),storage.load(localStorageName);var result=storeFunction.apply(store,args);return storageOwner.removeChild(storage),result}},forbiddenCharsRegex=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),ieKeyFix=function(key){return key.replace(/^d/,"___$&").replace(forbiddenCharsRegex,"___")};store.set=withIEStorage(function(storage,key,val){return key=ieKeyFix(key),void 0===val?store.remove(key):(storage.setAttribute(key,store.serialize(val)),storage.save(localStorageName),val)}),store.get=withIEStorage(function(storage,key,defaultVal){key=ieKeyFix(key);var val=store.deserialize(storage.getAttribute(key));return void 0===val?defaultVal:val}),store.remove=withIEStorage(function(storage,key){key=ieKeyFix(key),storage.removeAttribute(key),storage.save(localStorageName)}),store.clear=withIEStorage(function(storage){var attributes=storage.XMLDocument.documentElement.attributes;storage.load(localStorageName);for(var i=attributes.length-1;i>=0;i--)storage.removeAttribute(attributes[i].name);storage.save(localStorageName)}),store.getAll=function(storage){var ret={};return store.forEach(function(key,val){ret[key]=val}),ret},store.forEach=withIEStorage(function(storage,callback){for(var attr,attributes=storage.XMLDocument.documentElement.attributes,i=0;attr=attributes[i];++i)callback(attr.name,store.deserialize(storage.getAttribute(attr.name)))})}try{var testKey="__storejs__";store.set(testKey,testKey),store.get(testKey)!=testKey&&(store.disabled=!0),store.remove(testKey)}catch(e){store.disabled=!0}return store.enabled=!store.disabled,store})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(require,module,exports){var Adapters,LocalStorageAdapter,utils,bind=function(fn,me){return function(){return fn.apply(me,arguments)}};utils=require("./utils"),LocalStorageAdapter=require("./local_storage_adapter"),Adapters=function(){function Adapters(){}return Adapters.GimelAdapter=function(){function GimelAdapter(url,namespace,storage){null==storage&&(storage=LocalStorageAdapter),this.goal_complete=bind(this.goal_complete,this),this.experiment_start=bind(this.experiment_start,this),this._storage=storage,this.url=url,this.namespace=namespace,this._queue=JSON.parse(this._storage.get(this.queue_name)||"[]"),this._flush()}return GimelAdapter.prototype.queue_name="_gimel_queue",GimelAdapter.prototype._remove_uuid=function(uuid){return function(_this){return function(err,res){return err?void 0:(utils.remove(_this._queue,function(el){return el.properties.uuid===uuid}),_this._storage.set(_this.queue_name,JSON.stringify(_this._queue)))}}(this)},GimelAdapter.prototype._jquery_get=function(url,data,callback){return utils.log("send request using jQuery"),$.ajax({method:"GET",url:url,data:data,success:callback})},GimelAdapter.prototype._plain_js_get=function(url,data,callback){var k,params,v,xhr;return utils.log("fallback on plain js xhr"),xhr=new XMLHttpRequest,params=function(){var results;results=[];for(k in data)v=data[k],results.push(encodeURIComponent(k)+"="+encodeURIComponent(v));return results}(),params=params.join("&").replace(/%20/g,"+"),xhr.open("GET",url+"?"+params),xhr.onload=function(){return 200===xhr.status?callback():void 0},xhr.send()},GimelAdapter.prototype._ajax_get=function(url,data,callback){return("undefined"!=typeof $&&null!==$?$.ajax:void 0)?this._jquery_get(url,data,callback):this._plain_js_get(url,data,callback)},GimelAdapter.prototype._flush=function(){var callback,i,item,len,ref,results;for(ref=this._queue,results=[],i=0,len=ref.length;len>i;i++)item=ref[i],callback=this._remove_uuid(item.properties.uuid),this._ajax_get(this.url,item.properties,callback),results.push(null);return results},GimelAdapter.prototype._track=function(experiment_name,variant,event){return utils.log("Persistent Queue Gimel track: "+this.namespace+", "+experiment_name+", "+variant+", "+event),this._queue.length>100&&this._queue.shift(),this._queue.push({properties:{experiment:experiment_name,uuid:utils.uuid(),variant:variant,event:event,namespace:this.namespace}}),this._storage.set(this.queue_name,JSON.stringify(this._queue)),this._flush()},GimelAdapter.prototype.experiment_start=function(experiment_name,variant){return this._track(experiment_name,variant,"participate")},GimelAdapter.prototype.goal_complete=function(experiment_name,variant,goal){return this._track(experiment_name,variant,goal)},GimelAdapter}(),Adapters.PersistentQueueGoogleAnalyticsAdapter=function(){function PersistentQueueGoogleAnalyticsAdapter(storage){null==storage&&(storage=LocalStorageAdapter),this.goal_complete=bind(this.goal_complete,this),this.experiment_start=bind(this.experiment_start,this),this._storage=storage,this._queue=JSON.parse(this._storage.get(this.queue_name)||"[]"),this._flush()}return PersistentQueueGoogleAnalyticsAdapter.prototype.namespace="alephbet",PersistentQueueGoogleAnalyticsAdapter.prototype.queue_name="_ga_queue",PersistentQueueGoogleAnalyticsAdapter.prototype._remove_uuid=function(uuid){return function(_this){return function(){return utils.remove(_this._queue,function(el){return el.uuid===uuid}),_this._storage.set(_this.queue_name,JSON.stringify(_this._queue))}}(this)},PersistentQueueGoogleAnalyticsAdapter.prototype._flush=function(){var callback,i,item,len,ref,results;if("function"!=typeof ga)throw"ga not defined. Please make sure your Universal analytics is set up correctly";for(ref=this._queue,results=[],i=0,len=ref.length;len>i;i++)item=ref[i],callback=this._remove_uuid(item.uuid),results.push(ga("send","event",item.category,item.action,item.label,{hitCallback:callback,nonInteraction:1}));return results},PersistentQueueGoogleAnalyticsAdapter.prototype._track=function(category,action,label){return utils.log("Persistent Queue Google Universal Analytics track: "+category+", "+action+", "+label),this._queue.length>100&&this._queue.shift(),this._queue.push({uuid:utils.uuid(),category:category,action:action,label:label}),this._storage.set(this.queue_name,JSON.stringify(this._queue)),this._flush()},PersistentQueueGoogleAnalyticsAdapter.prototype.experiment_start=function(experiment_name,variant){return this._track(this.namespace,experiment_name+" | "+variant,"Visitors")},PersistentQueueGoogleAnalyticsAdapter.prototype.goal_complete=function(experiment_name,variant,goal){return this._track(this.namespace,experiment_name+" | "+variant,goal)},PersistentQueueGoogleAnalyticsAdapter}(),Adapters.PersistentQueueKeenAdapter=function(){function PersistentQueueKeenAdapter(keen_client,storage){null==storage&&(storage=LocalStorageAdapter),this.goal_complete=bind(this.goal_complete,this),this.experiment_start=bind(this.experiment_start,this),this.client=keen_client,this._storage=storage,this._queue=JSON.parse(this._storage.get(this.queue_name)||"[]"),this._flush()}return PersistentQueueKeenAdapter.prototype.queue_name="_keen_queue",PersistentQueueKeenAdapter.prototype._remove_uuid=function(uuid){return function(_this){return function(err,res){return err?void 0:(utils.remove(_this._queue,function(el){return el.properties.uuid===uuid}),_this._storage.set(_this.queue_name,JSON.stringify(_this._queue)))}}(this)},PersistentQueueKeenAdapter.prototype._flush=function(){var callback,i,item,len,ref,results;for(ref=this._queue,results=[],i=0,len=ref.length;len>i;i++)item=ref[i],callback=this._remove_uuid(item.properties.uuid),results.push(this.client.addEvent(item.experiment_name,item.properties,callback));return results},PersistentQueueKeenAdapter.prototype._track=function(experiment_name,variant,event){return utils.log("Persistent Queue Keen track: "+experiment_name+", "+variant+", "+event),this._queue.length>100&&this._queue.shift(),this._queue.push({experiment_name:experiment_name,properties:{uuid:utils.uuid(),variant:variant,event:event}}),this._storage.set(this.queue_name,JSON.stringify(this._queue)),this._flush()},PersistentQueueKeenAdapter.prototype.experiment_start=function(experiment_name,variant){return this._track(experiment_name,variant,"participate")},PersistentQueueKeenAdapter.prototype.goal_complete=function(experiment_name,variant,goal){return this._track(experiment_name,variant,goal)},PersistentQueueKeenAdapter}(),Adapters}(),module.exports=Adapters},{"./local_storage_adapter":5,"./utils":8}],4:[function(require,module,exports){var AlephBet,LocalStorageAdapter,adapters,options,utils,bind=function(fn,me){return function(){return fn.apply(me,arguments)}};utils=require("./utils"),adapters=require("./adapters"),options=require("./options"),LocalStorageAdapter=require("./local_storage_adapter"),AlephBet=function(){function AlephBet(){}return AlephBet.options=options,AlephBet.utils=utils,AlephBet.GimelAdapter=adapters.GimelAdapter,AlephBet.PersistentQueueGoogleAnalyticsAdapter=adapters.PersistentQueueGoogleAnalyticsAdapter,AlephBet.PersistentQueueKeenAdapter=adapters.PersistentQueueKeenAdapter,AlephBet.GoogleUniversalAnalyticsAdapter=function(){function GoogleUniversalAnalyticsAdapter(){}return GoogleUniversalAnalyticsAdapter.namespace="alephbet",GoogleUniversalAnalyticsAdapter._track=function(category,action,label){if(utils.log("Google Universal Analytics track: "+category+", "+action+", "+label),"function"!=typeof ga)throw"ga not defined. Please make sure your Universal analytics is set up correctly";return ga("send","event",category,action,label,{nonInteraction:1})},GoogleUniversalAnalyticsAdapter.experiment_start=function(experiment_name,variant){return GoogleUniversalAnalyticsAdapter._track(GoogleUniversalAnalyticsAdapter.namespace,experiment_name+" | "+variant,"Visitors")},GoogleUniversalAnalyticsAdapter.goal_complete=function(experiment_name,variant,goal){return GoogleUniversalAnalyticsAdapter._track(GoogleUniversalAnalyticsAdapter.namespace,experiment_name+" | "+variant,goal)},GoogleUniversalAnalyticsAdapter}(),AlephBet.Experiment=function(){function Experiment(options1){this.options=null!=options1?options1:{},this.add_goals=bind(this.add_goals,this),this.add_goal=bind(this.add_goal,this),utils.defaults(this.options,Experiment._options),_validate.call(this),this.name=this.options.name,this.variants=this.options.variants,this.variant_names=utils.keys(this.variants),_run.call(this)}var _run,_validate;return Experiment._options={name:null,variants:null,sample:1,trigger:function(){return!0},tracking_adapter:AlephBet.GoogleUniversalAnalyticsAdapter,storage_adapter:LocalStorageAdapter},Experiment.prototype.run=function(){var variant;return utils.log("running with options: "+JSON.stringify(this.options)),(variant=this.get_stored_variant())?(utils.log(variant+" active"),this.activate_variant(variant)):this.conditionally_activate_variant()},_run=function(){return this.run()},Experiment.prototype.activate_variant=function(variant){var ref;return null!=(ref=this.variants[variant])&&ref.activate(this),this.storage().set(this.options.name+":variant",variant)},Experiment.prototype.conditionally_activate_variant=function(){var variant;if(this.options.trigger()&&(utils.log("trigger set"),this.in_sample()))return utils.log("in sample"),variant=this.pick_variant(),this.tracking().experiment_start(this.options.name,variant),this.activate_variant(variant)},Experiment.prototype.goal_complete=function(goal_name,props){var variant;return null==props&&(props={}),utils.defaults(props,{unique:!0}),props.unique&&this.storage().get(this.options.name+":"+goal_name)||!(variant=this.get_stored_variant())?void 0:(props.unique&&this.storage().set(this.options.name+":"+goal_name,!0),utils.log("experiment: "+this.options.name+" variant:"+variant+" goal:"+goal_name+" complete"),this.tracking().goal_complete(this.options.name,variant,goal_name))},Experiment.prototype.get_stored_variant=function(){return this.storage().get(this.options.name+":variant")},Experiment.prototype.pick_variant=function(){var chosen_partition,partitions,variant;return partitions=1/this.variant_names.length,chosen_partition=Math.floor(Math.random()/partitions),variant=this.variant_names[chosen_partition],utils.log(variant+" picked"),variant},Experiment.prototype.in_sample=function(){var active;return active=this.storage().get(this.options.name+":in_sample"),"undefined"!=typeof active?active:(active=Math.random()<=this.options.sample,this.storage().set(this.options.name+":in_sample",active),active)},Experiment.prototype.add_goal=function(goal){return goal.add_experiment(this)},Experiment.prototype.add_goals=function(goals){var goal,i,len,results;for(results=[],i=0,len=goals.length;len>i;i++)goal=goals[i],results.push(this.add_goal(goal));return results},Experiment.prototype.storage=function(){return this.options.storage_adapter},Experiment.prototype.tracking=function(){return this.options.tracking_adapter},_validate=function(){if(null===this.options.name)throw"an experiment name must be specified";if(null===this.options.variants)throw"variants must be provided";if("function"!=typeof this.options.trigger)throw"trigger must be a function"},Experiment}(),AlephBet.Goal=function(){function Goal(name,props1){this.name=name,this.props=null!=props1?props1:{},utils.defaults(this.props,{unique:!0}),this.experiments=[]}return Goal.prototype.add_experiment=function(experiment){return this.experiments.push(experiment)},Goal.prototype.add_experiments=function(experiments){var experiment,i,len,results;for(results=[],i=0,len=experiments.length;len>i;i++)experiment=experiments[i],results.push(this.add_experiment(experiment));return results},Goal.prototype.complete=function(){var experiment,i,len,ref,results;for(ref=this.experiments,results=[],i=0,len=ref.length;len>i;i++)experiment=ref[i],results.push(experiment.goal_complete(this.name,this.props));return results},Goal}(),AlephBet}(),module.exports=AlephBet},{"./adapters":3,"./local_storage_adapter":5,"./options":6,"./utils":8}],5:[function(require,module,exports){var LocalStorageAdapter,Storage;Storage=require("./storage"),LocalStorageAdapter=function(){function LocalStorageAdapter(){}return LocalStorageAdapter.namespace="alephbet",LocalStorageAdapter.set=function(key,value){return new Storage(this.namespace).set(key,value)},LocalStorageAdapter.get=function(key){return new Storage(this.namespace).get(key)},LocalStorageAdapter}(),module.exports=LocalStorageAdapter},{"./storage":7}],6:[function(require,module,exports){module.exports={debug:!1}},{}],7:[function(require,module,exports){var Storage,store;store=require("store"),Storage=function(){function Storage(namespace){if(this.namespace=null!=namespace?namespace:"alephbet",!store.enabled)throw"local storage not supported";this.storage=store.get(this.namespace)||{}}return Storage.prototype.set=function(key,value){return this.storage[key]=value,store.set(this.namespace,this.storage),value},Storage.prototype.get=function(key){return this.storage[key]},Storage}(),module.exports=Storage},{store:2}],8:[function(require,module,exports){var Utils,_,options,uuid;_=require("../vendor/lodash.custom"),uuid=require("node-uuid"),options=require("./options"),Utils=function(){function Utils(){}return Utils.defaults=_.defaults,Utils.keys=_.keys,Utils.remove=_.remove,Utils.log=function(message){return options.debug?console.log(message):void 0},Utils.uuid=uuid.v4,Utils}(),module.exports=Utils},{"../vendor/lodash.custom":9,"./options":6,"node-uuid":1}],9:[function(require,module,exports){(function(global){(function(){function baseToString(value){return null==value?"":value+""}function isObjectLike(value){return!!value&&"object"==typeof value}function lodash(){}function arrayCopy(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}function arrayEach(array,iteratee){for(var index=-1,length=array.length;++index<length&&iteratee(array[index],index,array)!==!1;);return array}function arraySome(array,predicate){for(var index=-1,length=array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}function assignDefaults(objectValue,sourceValue){return objectValue===undefined?sourceValue:objectValue}function assignWith(object,source,customizer){for(var index=-1,props=keys(source),length=props.length;++index<length;){var key=props[index],value=object[key],result=customizer(value,source[key],key,object,source);(result===result?result===value:value!==value)&&(value!==undefined||key in object)||(object[key]=result)}return object}function baseAssign(object,source){return null==source?object:baseCopy(source,keys(source),object)}function baseCopy(source,props,object){object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index];object[key]=source[key]}return object}function baseCallback(func,thisArg,argCount){var type=typeof func;return"function"==type?thisArg===undefined?func:bindCallback(func,thisArg,argCount):null==func?identity:"object"==type?baseMatches(func):thisArg===undefined?property(func):baseMatchesProperty(func,thisArg)}function baseClone(value,isDeep,customizer,key,object,stackA,stackB){var result;if(customizer&&(result=object?customizer(value,key,object):customizer(value)),result!==undefined)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=initCloneArray(value),!isDeep)return arrayCopy(value,result)}else{var tag=objToString.call(value),isFunc=tag==funcTag;if(tag!=objectTag&&tag!=argsTag&&(!isFunc||object))return cloneableTags[tag]?initCloneByTag(value,tag,isDeep):object?value:{};if(isHostObject(value))return object?value:{};if(result=initCloneObject(isFunc?{}:value),!isDeep)return baseAssign(result,value)}stackA||(stackA=[]),stackB||(stackB=[]);for(var length=stackA.length;length--;)if(stackA[length]==value)return stackB[length];return stackA.push(value),stackB.push(result),(isArr?arrayEach:baseForOwn)(value,function(subValue,key){result[key]=baseClone(subValue,isDeep,customizer,key,value,stackA,stackB)}),result}function baseForOwn(object,iteratee){return baseFor(object,iteratee,keys)}function baseGet(object,path,pathKey){if(null!=object){object=toObject(object),pathKey!==undefined&&pathKey in object&&(path=[pathKey]);for(var index=0,length=path.length;null!=object&&length>index;)object=toObject(object)[path[index++]];return index&&index==length?object:undefined}}function baseIsEqual(value,other,customizer,isLoose,stackA,stackB){return value===other?!0:null==value||null==other||!isObject(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,baseIsEqual,customizer,isLoose,stackA,stackB)}function baseIsEqualDeep(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;objIsArr||(objTag=objToString.call(object),objTag==argsTag?objTag=objectTag:objTag!=objectTag&&(objIsArr=isTypedArray(object))),othIsArr||(othTag=objToString.call(other),othTag==argsTag?othTag=objectTag:othTag!=objectTag&&(othIsArr=isTypedArray(other)));var objIsObj=objTag==objectTag&&!isHostObject(object),othIsObj=othTag==objectTag&&!isHostObject(other),isSameTag=objTag==othTag;if(isSameTag&&!objIsArr&&!objIsObj)return equalByTag(object,other,objTag);if(!isLoose){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped)return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,customizer,isLoose,stackA,stackB)}if(!isSameTag)return!1;stackA||(stackA=[]),stackB||(stackB=[]);for(var length=stackA.length;length--;)if(stackA[length]==object)return stackB[length]==other;stackA.push(object),stackB.push(other);var result=(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,customizer,isLoose,stackA,stackB);return stackA.pop(),stackB.pop(),result}function baseIsMatch(object,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=toObject(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object))return!1}else{var result=customizer?customizer(objValue,srcValue,key):undefined;if(!(result===undefined?baseIsEqual(srcValue,objValue,customizer,!0):result))return!1}}return!0}function baseMatches(source){var matchData=getMatchData(source);if(1==matchData.length&&matchData[0][2]){var key=matchData[0][0],value=matchData[0][1];return function(object){return null==object?!1:(object=toObject(object),object[key]===value&&(value!==undefined||key in object))}}return function(object){return baseIsMatch(object,matchData)}}function baseMatchesProperty(path,srcValue){var isArr=isArray(path),isCommon=isKey(path)&&isStrictComparable(srcValue),pathKey=path+"";return path=toPath(path),function(object){if(null==object)return!1;var key=pathKey;if(object=toObject(object),!(!isArr&&isCommon||key in object)){if(object=1==path.length?object:baseGet(object,baseSlice(path,0,-1)),null==object)return!1;key=last(path),object=toObject(object)}return object[key]===srcValue?srcValue!==undefined||key in object:baseIsEqual(srcValue,object[key],undefined,!0)}}function baseProperty(key){return function(object){return null==object?undefined:toObject(object)[key]}}function basePropertyDeep(path){var pathKey=path+"";return path=toPath(path),function(object){return baseGet(object,path,pathKey)}}function basePullAt(array,indexes){for(var length=array?indexes.length:0;length--;){var index=indexes[length];if(index!=previous&&isIndex(index)){var previous=index;splice.call(array,index,1)}}return array}function baseSlice(array,start,end){var index=-1,length=array.length;start=null==start?0:+start||0,0>start&&(start=-start>length?0:length+start),end=end===undefined||end>length?length:+end||0,0>end&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}function bindCallback(func,thisArg,argCount){if("function"!=typeof func)return identity;if(thisArg===undefined)return func;switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}}function bufferClone(buffer){var result=new ArrayBuffer(buffer.byteLength),view=new Uint8Array(result);return view.set(new Uint8Array(buffer)),result}function createAssigner(assigner){return restParam(function(object,sources){var index=-1,length=null==object?0:sources.length,customizer=length>2?sources[length-2]:undefined,guard=length>2?sources[2]:undefined,thisArg=length>1?sources[length-1]:undefined;for("function"==typeof customizer?(customizer=bindCallback(customizer,thisArg,5),length-=2):(customizer="function"==typeof thisArg?thisArg:undefined,length-=customizer?1:0),guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=3>length?undefined:customizer,length=1);++index<length;){var source=sources[index];source&&assigner(object,source,customizer)}return object})}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var iterable=toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;fromRight?index--:++index<length;){var key=props[index];if(iteratee(iterable[key],key,iterable)===!1)break}return object}}function createDefaults(assigner,customizer){return restParam(function(args){var object=args[0];return null==object?object:(args.push(customizer),assigner.apply(undefined,args))})}function equalArrays(array,other,equalFunc,customizer,isLoose,stackA,stackB){var index=-1,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isLoose&&othLength>arrLength))return!1;for(;++index<arrLength;){var arrValue=array[index],othValue=other[index],result=customizer?customizer(isLoose?othValue:arrValue,isLoose?arrValue:othValue,index):undefined;if(result!==undefined){if(result)continue;return!1}if(isLoose){if(!arraySome(other,function(othValue){return arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB)}))return!1}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB))return!1}return!0}function equalByTag(object,other,tag){switch(tag){case boolTag:case dateTag:return+object==+other;case errorTag:return object.name==other.name&&object.message==other.message;case numberTag:return object!=+object?other!=+other:object==+other;case regexpTag:case stringTag:return object==other+""}return!1}function equalObjects(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isLoose)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isLoose?key in other:hasOwnProperty.call(other,key)))return!1}for(var skipCtor=isLoose;++index<objLength;){key=objProps[index];var objValue=object[key],othValue=other[key],result=customizer?customizer(isLoose?othValue:objValue,isLoose?objValue:othValue,key):undefined;if(!(result===undefined?equalFunc(objValue,othValue,customizer,isLoose,stackA,stackB):result))return!1;skipCtor||(skipCtor="constructor"==key)}if(!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor))return!1;
}return!0}function getCallback(func,thisArg,argCount){var result=lodash.callback||callback;return result=result===callback?baseCallback:result,argCount?result(func,thisArg,argCount):result}function getMatchData(object){for(var result=pairs(object),length=result.length;length--;)result[length][2]=isStrictComparable(result[length][1]);return result}function getNative(object,key){var value=null==object?undefined:object[key];return isNative(value)?value:undefined}function initCloneArray(array){var length=array.length,result=new array.constructor(length);return length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input),result}function initCloneObject(object){var Ctor=object.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor||(Ctor=Object),new Ctor}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return bufferClone(object);case boolTag:case dateTag:return new Ctor(+object);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:Ctor instanceof Ctor&&(Ctor=ctorByTag[tag]);var buffer=object.buffer;return new Ctor(isDeep?bufferClone(buffer):buffer,object.byteOffset,object.length);case numberTag:case stringTag:return new Ctor(object);case regexpTag:var result=new Ctor(object.source,reFlags.exec(object));result.lastIndex=object.lastIndex}return result}function isArrayLike(value){return null!=value&&isLength(getLength(value))}function isIndex(value,length){return value="number"==typeof value||reIsUint.test(value)?+value:-1,length=null==length?MAX_SAFE_INTEGER:length,value>-1&&value%1==0&&length>value}function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;if("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object){var other=object[index];return value===value?value===other:other!==other}return!1}function isKey(value,object){var type=typeof value;if("string"==type&&reIsPlainProp.test(value)||"number"==type)return!0;if(isArray(value))return!1;var result=!reIsDeepProp.test(value);return result||null!=object&&value in toObject(object)}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&MAX_SAFE_INTEGER>=value}function isStrictComparable(value){return value===value&&!isObject(value)}function shimKeys(object){for(var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length,allowIndexes=!!length&&isLength(length)&&(isArray(object)||isArguments(object)||isString(object)),index=-1,result=[];++index<propsLength;){var key=props[index];(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key))&&result.push(key)}return result}function toObject(value){if(lodash.support.unindexedChars&&isString(value)){for(var index=-1,length=value.length,result=Object(value);++index<length;)result[index]=value.charAt(index);return result}return isObject(value)?value:Object(value)}function toPath(value){if(isArray(value))return value;var result=[];return baseToString(value).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)}),result}function last(array){var length=array?array.length:0;return length?array[length-1]:undefined}function remove(array,predicate,thisArg){var result=[];if(!array||!array.length)return result;var index=-1,indexes=[],length=array.length;for(predicate=getCallback(predicate,thisArg,3);++index<length;){var value=array[index];predicate(value,index,array)&&(result.push(value),indexes.push(index))}return basePullAt(array,indexes),result}function restParam(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=nativeMax(start===undefined?func.length-1:+start||0,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);++index<length;)rest[index]=args[start+index];switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);for(index=-1;++index<start;)otherArgs[index]=args[index];return otherArgs[start]=rest,func.apply(this,otherArgs)}}function isArguments(value){return isObjectLike(value)&&isArrayLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")}function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isNative(value){return null==value?!1:isFunction(value)?reIsNative.test(fnToString.call(value)):isObjectLike(value)&&(isHostObject(value)?reIsNative:reIsHostCtor).test(value)}function isString(value){return"string"==typeof value||isObjectLike(value)&&objToString.call(value)==stringTag}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objToString.call(value)]}function keysIn(object){if(null==object)return[];isObject(object)||(object=Object(object));var length=object.length,support=lodash.support;length=length&&isLength(length)&&(isArray(object)||isArguments(object)||isString(object))&&length||0;for(var Ctor=object.constructor,index=-1,proto=isFunction(Ctor)&&Ctor.prototype||objectProto,isProto=proto===object,result=Array(length),skipIndexes=length>0,skipErrorProps=support.enumErrorProps&&(object===errorProto||object instanceof Error),skipProto=support.enumPrototypes&&isFunction(object);++index<length;)result[index]=index+"";for(var key in object)skipProto&&"prototype"==key||skipErrorProps&&("message"==key||"name"==key)||skipIndexes&&isIndex(key,length)||"constructor"==key&&(isProto||!hasOwnProperty.call(object,key))||result.push(key);if(support.nonEnumShadows&&object!==objectProto){var tag=object===stringProto?stringTag:object===errorProto?errorTag:objToString.call(object),nonEnums=nonEnumProps[tag]||nonEnumProps[objectTag];for(tag==objectTag&&(proto=objectProto),length=shadowProps.length;length--;){key=shadowProps[length];var nonEnum=nonEnums[key];isProto&&nonEnum||(nonEnum?!hasOwnProperty.call(object,key):object[key]===proto[key])||result.push(key)}}return result}function pairs(object){object=toObject(object);for(var index=-1,props=keys(object),length=props.length,result=Array(length);++index<length;){var key=props[index];result[index]=[key,object[key]]}return result}function callback(func,thisArg,guard){return guard&&isIterateeCall(func,thisArg,guard)&&(thisArg=undefined),isObjectLike(func)?matches(func):baseCallback(func,thisArg)}function identity(value){return value}function matches(source){return baseMatches(baseClone(source,!0))}function property(path){return isKey(path)?baseProperty(path):basePropertyDeep(path)}var undefined,VERSION="3.10.0",FUNC_ERROR_TEXT="Expected a function",argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,reEscapeChar=/\\(\\)?/g,reFlags=/\w*$/,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^\d+$/,shadowProps=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[stringTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[mapTag]=cloneableTags[setTag]=cloneableTags[weakMapTag]=!1;var objectTypes={"function":!0,object:!0},freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports,freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module,freeGlobal=freeExports&&freeModule&&"object"==typeof global&&global&&global.Object&&global,freeSelf=objectTypes[typeof self]&&self&&self.Object&&self,freeWindow=objectTypes[typeof window]&&window&&window.Object&&window,moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports,root=freeGlobal||freeWindow!==(this&&this.window)&&freeWindow||freeSelf||this,isHostObject=function(){try{Object({toString:0}+"")}catch(e){return function(){return!1}}return function(value){return"function"!=typeof value.toString&&"string"==typeof(value+"")}}(),arrayProto=Array.prototype,errorProto=Error.prototype,objectProto=Object.prototype,stringProto=String.prototype,fnToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objToString=objectProto.toString,reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ArrayBuffer=root.ArrayBuffer,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,Uint8Array=root.Uint8Array,nativeIsArray=getNative(Array,"isArray"),nativeKeys=getNative(Object,"keys"),nativeMax=Math.max,MAX_SAFE_INTEGER=9007199254740991,ctorByTag={};ctorByTag[float32Tag]=root.Float32Array,ctorByTag[float64Tag]=root.Float64Array,ctorByTag[int8Tag]=root.Int8Array,ctorByTag[int16Tag]=root.Int16Array,ctorByTag[int32Tag]=root.Int32Array,ctorByTag[uint8Tag]=Uint8Array,ctorByTag[uint8ClampedTag]=root.Uint8ClampedArray,ctorByTag[uint16Tag]=root.Uint16Array,ctorByTag[uint32Tag]=root.Uint32Array;var nonEnumProps={};nonEnumProps[arrayTag]=nonEnumProps[dateTag]=nonEnumProps[numberTag]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},nonEnumProps[boolTag]=nonEnumProps[stringTag]={constructor:!0,toString:!0,valueOf:!0},nonEnumProps[errorTag]=nonEnumProps[funcTag]=nonEnumProps[regexpTag]={constructor:!0,toString:!0},nonEnumProps[objectTag]={constructor:!0},arrayEach(shadowProps,function(key){for(var tag in nonEnumProps)if(hasOwnProperty.call(nonEnumProps,tag)){var props=nonEnumProps[tag];props[key]=hasOwnProperty.call(props,key)}});var support=lodash.support={};!function(x){var Ctor=function(){this.x=x},object={0:x,length:x},props=[];Ctor.prototype={valueOf:x,y:x};for(var key in new Ctor)props.push(key);support.enumErrorProps=propertyIsEnumerable.call(errorProto,"message")||propertyIsEnumerable.call(errorProto,"name"),support.enumPrototypes=propertyIsEnumerable.call(Ctor,"prototype"),support.nonEnumShadows=!/valueOf/.test(props),support.spliceObjects=(splice.call(object,0,1),!object[0]),support.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1,0);var baseFor=createBaseFor(),getLength=baseProperty("length"),isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag},assign=createAssigner(function(object,source,customizer){return customizer?assignWith(object,source,customizer):baseAssign(object,source)}),defaults=createDefaults(assign,assignDefaults),keys=nativeKeys?function(object){var Ctor=null==object?undefined:object.constructor;return"function"==typeof Ctor&&Ctor.prototype===object||("function"==typeof object?lodash.support.enumPrototypes:isArrayLike(object))?shimKeys(object):isObject(object)?nativeKeys(object):[]}:shimKeys;lodash.assign=assign,lodash.callback=callback,lodash.defaults=defaults,lodash.keys=keys,lodash.keysIn=keysIn,lodash.matches=matches,lodash.pairs=pairs,lodash.property=property,lodash.remove=remove,lodash.restParam=restParam,lodash.extend=assign,lodash.iteratee=callback,lodash.identity=identity,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isFunction=isFunction,lodash.isNative=isNative,lodash.isObject=isObject,lodash.isString=isString,lodash.isTypedArray=isTypedArray,lodash.last=last,lodash.VERSION=VERSION,freeExports&&freeModule&&moduleExports&&((freeModule.exports=lodash)._=lodash)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[4])(4)});
